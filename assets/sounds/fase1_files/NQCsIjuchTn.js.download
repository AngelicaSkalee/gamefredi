if (self.CavalryLogger) { CavalryLogger.start_js(["GxSG0"]); }

__d("MMessagingActionType",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ACTION_ADD_PEOPLE:"add_people",ACTION_ARCHIVE:"archive",ACTION_BLOCK_MESSAGES:"block_messages",ACTION_UNBLOCK_MESSAGES:"unblock_messages",ACTION_DELETE:"delete",ACTION_DELETE_SELECTED:"delete_selected",ACTION_DELETE_MESSAGES:"delete_messages",ACTION_LEAVE_CONVERSATION:"leave_conversation",ACTION_MOVE:"move",ACTION_NONE:"none",ACTION_CANCEL:"cancel",ACTION_READ:"read",ACTION_SPAM:"spam",ACTION_REPORT_OR_SPAM:"report_or_spam",ACTION_REPORT:"report",ACTION_NOT_SPAM:"not_spam",ACTION_UNARCHIVE:"unarchive",ACTION_UNREAD:"unread",ACTION_FLAG:"flag",ACTION_UNFLAG:"unflag",ACTION_BAN_FROM_PAGE:"ban_from_page"};}),null);
__d("XMessagingMarkReadController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messaging\/mark_read\/",{});}),null);
__d('MMessageUtils',['MRequest','fbt','XMessagingMarkReadController'],(function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='threadlist_row_',l='other_user_fbid_',m='thread_fbid_';function n(r){var s=null;switch(r){case 'source:chat:orca':case 'source:titan:orca':s=i._("Enviada pelo Messenger");break;case 'source:mobile':case 'source:chat:iphone':case 'source:titan:api_mobile':case 'source:titan:m_ajax':case 'source:titan:m_basic':case 'source:titan:m_japan':case 'source:titan:m_mini':case 'source:titan:m_touch':case 'source:titan:m_app':case 'source:titan:m_tablet':case 'source:titan:m_zero':case 'source:titan:wap':s=i._("Enviada por dispositivo m\u00f3vel");break;case 'source:email':case 'source:titan:emailreply':s=i._("Enviado por e-mail");break;case 'source:titan:web':case 'source:chat:web':s=i._("Enviado pela Web");break;}return s;}function o(r,s,t,u){var v=Object.keys(s).length,w=r.length+(t!==u?1:0);if(v>3&&w>=v-1){return i._("Visualizado por todos");}else if(r.length==1){return i._("Visualizado por {user}",[i.param('user',s[r[0]])]);}else if(r.length==2){return i._("Visualizada por {user1}, {user2}",[i.param('user1',s[r[0]]),i.param('user2',s[r[1]])]);}else if(r.length==3){return i._("Visualizada por {user1}, {user2}, {user3}",[i.param('user1',s[r[0]]),i.param('user2',s[r[1]]),i.param('user3',s[r[2]])]);}else if(r.length>3){var x=i._({"*":"mais {num}"},[i.param('num',r.length-2,[0])]);return i._("Visualizado por {user1}, {user2}, {=num more link}",[i.param('user1',s[r[0]]),i.param('user2',s[r[1]]),i.param('=num more link',x)]);}}function p(r){var s=j.getURIBuilder().getURI(),t={thread_id:r},u=new h(s).setMethod('POST').addData(t);u.send();}function q(r,s){r=r?r:'';s=s?s:'';return (k+l+r+m+s);}g.getMessageSourceText=n;g.getSeenByParticipantsText=o;g.markRead=p;g.getThreadListRowID=q;}),null);
__d('MThreadlistBulkActions',['CSS','MLegacyDataStore','DOM','MercurySingletonProvider','MMessageUtils','MMessagingActionType','MRequest','MURI','Stratcom','cx','fbt'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s='selected-caption',t='toggle-all-threads',u='threadlist_rows',v='thread-checkbox',w='thread-with-checkbox',x='m:page:unload',y='perform-action',z='actions',aa='action-form';function ba(ea,fa){return (' '+ea.className+' ').indexOf(' '+fa+' ')>-1;}ca.getForFBID=function(ea){return da.getForFBID(ea);};ca.get=function(){return da.get();};function ca(ea){this.$MThreadlistBulkActions3=ea;}ca.prototype.init=function(ea){this.$MThreadlistBulkActions9=ea;this.$MThreadlistBulkActions2=document.getElementById(u);this.$MThreadlistBulkActions4=j.find(document,'a',z);this.$MThreadlistBulkActions6=j.scry(document,'article',y);this.$MThreadlistBulkActions5=j.find(document,'input',t);this.$MThreadlistBulkActions7=j.find(document,'span',s);this.$MThreadlistBulkActions8=j.find(document,'form',aa);this.$MThreadlistBulkActions1=[p.listen('click',y,function(fa){return this.performAction(i.get(fa.getTarget()).type,this.$MThreadlistBulkActions9);}.bind(this)),p.listen('click',w,function(fa){return this.$MThreadlistBulkActions10(fa);}.bind(this)),p.listen('click',t,function(fa){return this.$MThreadlistBulkActions11(fa);}.bind(this)),p.listen(x,null,function(){this.$MThreadlistBulkActions1.forEach(function(fa){return fa.remove();});}.bind(this))];};ca.prototype.$MThreadlistBulkActions10=function(event){var ea=event.getNode(w),fa=j.find(ea,'input',v);if(fa!==event.getTarget())fa.checked=!fa.checked;h.conditionClass(ea,"_34tk",fa.checked);this.$MThreadlistBulkActions12();};ca.prototype.getActionNode=function(ea){return this.$MThreadlistBulkActions6.find(function(fa){return i.get(fa).type===ea;});};ca.prototype.isSomeThreadsChecked=function(){return this.getAllCheckboxes().some(function(ea){return ea.checked;});};ca.prototype.getAllCheckedTIDs=function(){return this.getAllCheckboxes().filter(function(ea){return ea.checked;}).map(function(ea){return ea.value;});};ca.prototype.getFlaggedCheckedThreads=function(){return this.getAllCheckboxes().filter(function(ea){var fa=document.getElementById(l.getThreadListRowID(ea.dataset.otherUserFbid,ea.dataset.threadFbid));return (ea.checked&&ba(fa,"_38p7"));}).length;};ca.prototype.getAllCheckboxes=function(){return j.scry(this.$MThreadlistBulkActions2,'input',v);};ca.prototype.$MThreadlistBulkActions12=function(){this.updateActionsVisibility();this.updateSelectedCountCaption();var ea=this.isSomeThreadsChecked();h.conditionShow(this.$MThreadlistBulkActions4,ea);if(this.$MThreadlistBulkActions5.checked&&!ea)this.$MThreadlistBulkActions5.checked=ea;};ca.prototype.$MThreadlistBulkActions11=function(event){this.getAllCheckboxes().map(function(ea){ea.checked=event.getTarget().checked;h.conditionClass(ea.parentNode,"_34tk",ea.checked);});h.conditionShow(this.$MThreadlistBulkActions4,event.getTarget().checked);this.$MThreadlistBulkActions12();};ca.prototype.updateSelectedCountCaption=function(){var ea=this.getAllCheckedTIDs().length,fa='';if(ea>0){fa=r._({"*":"{number of threads selected} selecionado(s)"},[r.param('number of threads selected',ea,[0])]);}else fa=r._(["Selecionar todas","7ee14f5f2f7e5c25838939982d38cbb7"]);j.setContent(this.$MThreadlistBulkActions7,fa);};ca.prototype.updateActionsVisibility=function(){this.$MThreadlistBulkActions13();};ca.prototype.$MThreadlistBulkActions13=function(){var ea=this.getFlaggedCheckedThreads(),fa=this.getAllCheckedTIDs().length-ea,ga=this.getActionNode('flag'),ha=this.getActionNode('unflag');if(ga)h.conditionShow(ga,fa>0);if(ha)h.conditionShow(ha,ea>0);};ca.prototype.$MThreadlistBulkActions14=function(ea){return ea===m.ACTION_READ||ea===m.ACTION_UNREAD;};ca.prototype.performAction=function(ea,fa){var ga=this.getAllCheckedTIDs(),ha={pageID:this.$MThreadlistBulkActions3,tid:ga[0],tids:ga,mm_action:ea,view:fa,is_bulk:true};if(this.$MThreadlistBulkActions14(ea)){ga.forEach(function(ia){ha.tid=ia;ha.tids=[ia];this.$MThreadlistBulkActions15(ea,ha);}.bind(this));}else this.$MThreadlistBulkActions15(ea,ha);};ca.prototype.$MThreadlistBulkActions15=function(ea,fa){var ga=new o('/messages/action_redirect').setQueryData(fa);if(this.$MThreadlistBulkActions16(ea)){this.$MThreadlistBulkActions8.action=ga;this.$MThreadlistBulkActions8.submit();}else{var ha=new n(ga).setMethod('POST');ha.send();}};ca.prototype.$MThreadlistBulkActions16=function(ea){return ea==='delete';};ca.initListeners=function(ea,fa){ca.getForFBID(ea).init(fa);};var da=new k(ca);f.exports=ca;}),null);