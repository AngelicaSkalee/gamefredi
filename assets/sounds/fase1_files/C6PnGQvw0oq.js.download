if (self.CavalryLogger) { CavalryLogger.start_js(["TuyBT"]); }

__d("XFeedNUXSaveSeenStateController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false},env:{type:"Enum",enumType:0}});}),null);
__d('MFeedNUXTooltip',['DOM','MRequest','MViewport','Stratcom','SubscriptionsHandler','XFeedNUXSaveSeenStateController','destroyOnUnload','mixInEventEmitter'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p={},q,r={},s,t=0,u=100,v=1,w=0;function x(){q=k.listen('scroll',null,z);n(y);}function y(){if(q)q.remove();q=null;window.clearTimeout(s);s=null;}function z(){var ca=j.getHeight();if(s){window.clearTimeout(s);s=null;}for(var da in p){var ea=p[da],fa=ea.getNodes(),ga=ea.getHeadRoom();for(var ha=0;ha<fa.length;ha++){var ia=fa[ha].getBoundingClientRect();if(ia.top>=ga&&ia.bottom<=ca){aa(fa[ha],ea);break;}}}}function aa(ca,da){s=window.setTimeout(function(){if(da.getContext()!==ca){da.setContext(ca);da.show();}},t);}function ba(ca,da,ea,fa){'use strict';if(!p.length)x();if(p[da]||r[da]){ea.destroy();return;}this.$MFeedNUXTooltip1=da;this.$MFeedNUXTooltip2=h.scry(document.getElementById('page'),'*',ca);this.$MFeedNUXTooltip3=ca;this.$MFeedNUXTooltip4=w;this.$MFeedNUXTooltip5=ea;this.$MFeedNUXTooltip6=fa===0?0:fa||u;p[da]=this;var ga=new l();ga.addSubscriptions(this.$MFeedNUXTooltip5.addListener('show',this.emit.bind(this,'show')),this.$MFeedNUXTooltip5.addListener('hide',function(){this.emit('hide');ga.release();}.bind(this)));z();}ba.prototype.destroy=function(){'use strict';delete p[this.$MFeedNUXTooltip1];if(!Object.keys(p).length)y();};ba.prototype.getContext=function(){'use strict';return this.$MFeedNUXTooltip5.getContext();};ba.prototype.getNodes=function(){'use strict';return this.$MFeedNUXTooltip2;};ba.prototype.getHeadRoom=function(){'use strict';return this.$MFeedNUXTooltip6;};ba.prototype.getIsUnseen=function(){'use strict';return this.$MFeedNUXTooltip4===w;};ba.prototype.setContext=function(ca){'use strict';this.$MFeedNUXTooltip5&&this.$MFeedNUXTooltip5.setContext(ca);};ba.prototype.show=function(){'use strict';if(!this.$MFeedNUXTooltip5||this.$MFeedNUXTooltip4===v)return;r[this.$MFeedNUXTooltip1]=true;this.$MFeedNUXTooltip4=v;this.$MFeedNUXTooltip5.show();var ca=m.getURIBuilder().setString('key',this.$MFeedNUXTooltip1).setBool('seen',true);new i(ca.getURI()).setMethod('POST').send();this.destroy();};ba.prototype.hide=function(){'use strict';this.$MFeedNUXTooltip5&&this.$MFeedNUXTooltip5.hide();};o(ba,{show:true,hide:true});f.exports=ba;}),null);
__d('MFeedReactionsNUX',['BanzaiLogger','MLegacyDataStore','MLiveData','Stratcom','SubscriptionsHandler','requestAnimationFrame'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(p){var q;if(p)(function(){var r=new l();r.addSubscriptions(k.listen('click','like-reaction-flyout',function(s){var t,u=s.getNode('feed-ufi-metadata')||s.getNode('like-reaction-flyout');if(!u)return;var v=i.get(u),w=v.feedback_target||v.feedbackTarget;if(w)(function(){var x=j.get(w);r.addSubscriptions(x.listen('change',function(){if(x.getData().has_viewer_liked)m(function(){p.setContext(s.getTarget());p.show();o(w);});}));})();}),k.listen('click','reactions-bling-bar',function(s){var t=s.getNode('mufi-inline').querySelector('a[data-sigil*="like-reaction-flyout"]');if(t){var u=s.getNode('feed-ufi-metadata'),v=i.get(u).feedback_target.toString();o(v);p.setContext(t);p.show();s.kill();}}),p.once('hide',function(){r.release();}));k.listen('m:page:unload',null,function(){k.removeCurrentListener();r.release();});})();}function o(p){h.log('WebReactionsNuxLoggerConfig',{feedback_id:p,'interface':'mTouch'});}f.exports.init=n;}),null);
__d('MQuickPromotionEmbeddedInterstitial',['DOM','MRequest','Stratcom','XQuickPromotionSimpleLoggingController'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=false,m=function n(o,p,q){if(l)return;l=true;function r(event){j.removeCurrentListener();var t=event.getNode(o.promo);h.hide(t);var u=h.find(event.getNode(o.jewel),'div',o.sibling);h.show(u);j.invoke('m:qp:embedded-interstitial:close');}function s(event){if(event.getData().jewel==o.jewel){j.removeCurrentListener();var t=k.getURIBuilder().setInt('qp_id',p).setStringToStringMap('qp_instance_log_data',q).setString('qp_event','view').getURI(),u=new i(t);u.send();}}j.listen('click',o.close,r);j.listen('m:jewel:flyout:open',null,s);};g.main=m;}),null);