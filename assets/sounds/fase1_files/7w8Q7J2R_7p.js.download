if (self.CavalryLogger) { CavalryLogger.start_js(["Mi3wN"]); }

__d("MSnowflakeJSConstants",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={INIT_PATH:"\/photos\/snowflake\/init\/",PAGE_PATH:"\/photos\/snowflake\/page\/",VIEWER_INIT_BATCH_SIZE:6,VIEWER_PAGE_BATCH_SIZE:10};}),null);
__d("PhotosContentViewingSurfaces",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SNOWFLAKE:"snowflake",FULL_SCREEN_GALLERY:"full_screen_gallery",PERMALINK:"permalink",TAB_VIEW:"tab_view"};}),null);
__d("PhotosLogType",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={NAVIGATION:"navigation",VPV:"vpv",TIMETRACKING:"timetracking"};}),null);
__d("PhotosUserActionTypes",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SWIPE:"swipe",SCROLL:"scroll",CLICK:"click",KEYS:"keys"};}),null);
__d("SnowflakeWebDriverIDs",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={HEADER_CARD:"Snowflake\/headerCard",OPTIONS_MENU:"Snowflake\/optionsMenu",PHOTO_CARD:"Snowflake\/photoCard",ROOT:"Snowflake\/root",SNOWFLAKE_MORE_ACTION:"snowflake-more-action"};}),null);
__d('ClientTrackingMessage',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){'use strict';this.message={};}h.prototype.addTrackingMessage=function(i){'use strict';Object.assign(this.message,i);};h.prototype.getAppendedTrackingData=function(){'use strict';return Object.keys(this.message).map(function(i){var j=this.message[i];if(Array.isArray(j))j=JSON.stringify(j);return i+'.'+j;}.bind(this)).join(':');};h.prototype.appendToURI=function(i){'use strict';i.addQueryData(h.URI_KEY,this.getAppendedTrackingData());};h.URI_KEY='_ft_';f.exports=h;}),null);
__d('MDateString',['fbt'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=86400;function j(aa){return aa instanceof Date?aa:new Date(aa*1000);}function k(aa,ba,ca){aa=aa.toString();ca=ca||'0';while(aa.length<ba)aa=ca+aa;return aa;}function l(aa,ba){aa=j(aa);ba=j(ba);return aa.getFullYear()===ba.getFullYear()&&aa.getMonth()===ba.getMonth()&&aa.getDate()===ba.getDate();}function m(aa){return aa.getFullYear()===new Date().getFullYear();}function n(aa){aa=j(aa);var ba=aa.getHours(),ca=ba>=12,da=ba;if(da===0){da=12;}else if(da>12)da-=12;var ea=k(aa.getMinutes(),2);return h._("{hours}:{minutes} {ampm}",[h.param('hours',da),h.param('minutes',ea),h.param('ampm',ca?'PM':'AM')]);}function o(aa,ba){aa=aa||new Date();ba=ba||{};var ca=ba.zero_padding?2:1;return h._("{date}\/{month}\/{year}",[h.param('month',k(aa.getMonth()+1,ca)),h.param('date',k(aa.getDate(),ca)),h.param('year',(aa.getFullYear()+'').substr(-2))]);}var p=[h._("Dom"),h._("Seg"),h._("Ter"),h._("Qua"),h._("Qui"),h._("Sex"),h._("S\u00e1b")],q=[h._("Domingo"),h._("Segunda"),h._("Ter\u00e7a"),h._("Quarta"),h._("Quinta"),h._("Sexta"),h._("S\u00e1bado")],r=[h._("Jan"),h._("Fev"),h._("Mar"),h._("Abr"),h._("Maio"),h._("Jun"),h._("Jul"),h._("Ago"),h._("Set"),h._("Out"),h._("Nov"),h._("Dez")],s=[h._("janeiro"),h._("Fevereiro"),h._("mar\u00e7o"),h._("abril"),h._("maio"),h._("junho"),h._("julho"),h._("agosto"),h._("setembro"),h._("outubro"),h._("novembro"),h._("dezembro")];function t(aa,ba){var ca=j(aa).getDay();return ba?p[ca]:q[ca];}function u(aa,ba){var ca=j(aa).getMonth();return ba?r[ca]:s[ca];}function v(){return Date.now()/1000|0;}function w(aa,ba){if(aa==-1){return h._("Agora mesmo");}else if(aa===0)return '';var ca=v(),da=new Date(aa*1000),ea=ca-aa|0,fa=ea/60|0,ga=fa/60|0,ha=ga/24|0,ia=ha/30.4|0,ja=ha/365|0;ba=ba||{};var ka=ba.compact||false,la=ba.relative!==undefined?ba.relative:ea<=i,ma=ba.show_cur_year!==undefined?ba.show_cur_year:true;if(la){var na={year:ja,month:ia,day:ha,hr:ga,min:fa,sec:ea},oa;for(var pa in na){oa=na[pa];if(oa!==0){var qa=Math.abs(oa);if(qa==1&&!ka)switch(pa){case 'year':return h._("h\u00e1 mais de um ano");case 'month':return h._("h\u00e1 cerca de um m\u00eas");case 'day':return h._("h\u00e1 \u00b1 um dia");case 'hr':return h._("h\u00e1 \u00b1 1 hora");case 'min':return h._("h\u00e1 \u00b1 um minuto");case 'sec':return h._("alguns segundos atr\u00e1s");}if(ka){switch(pa){case 'year':return h._({"*":"{number} ano(s)"},[h.param('number',qa,[0])]);case 'month':return h._({"*":"{number} meses"},[h.param('number',qa,[0])]);case 'day':return h._({"*":"{number} dia(s)"},[h.param('number',qa,[0])]);case 'hr':return h._({"*":"{number} hora(s)"},[h.param('number',qa,[0])]);case 'min':return h._({"*":"{number} min"},[h.param('number',qa,[0])]);case 'sec':return h._({"*":"{number} s"},[h.param('number',qa,[0])]);}}else switch(pa){case 'year':return h._({"*":"h\u00e1 {number} anos"},[h.param('number',qa,[0])]);case 'month':return h._({"*":"h\u00e1 {number} meses"},[h.param('number',qa,[0])]);case 'day':return h._({"*":"h\u00e1 {number} dias"},[h.param('number',qa,[0])]);case 'hr':return h._({"*":"H\u00e1 {number} horas"},[h.param('number',qa,[0])]);case 'min':return h._({"*":"h\u00e1 {number} minutos"},[h.param('number',qa,[0])]);case 'sec':return h._({"*":"h\u00e1 {number} segundos"},[h.param('number',qa,[0])]);}}}return h._("Agora mesmo");}else{if(ka)if(l(ca,da)){return n(da);}else if(ca-i*7<aa){return t(da,true);}else return o(da);if(l(ca,da)){return h._("Hoje \u00e0s {time}",[h.param('time',n(da))]);}else if(l(ca-i,da)){return h._("Ontem \u00e0s {time}",[h.param('time',n(da))]);}else if(l(ca-i*2,da)||l(ca-i*3,da)){return h._("{weekday} \u00e0s {time}",[h.param('weekday',t(da)),h.param('time',n(da))]);}else if(ca-i*7<aa){return h._("{date} de {month}",[h.param('month',u(da,true)),h.param('date',da.getDate())]);}else if(!ma&&m(da)){return h._("{date} de {month}",[h.param('month',u(da,true)),h.param('date',da.getDate())]);}else return h._("{date} de {month} de {year}",[h.param('month',u(da,true)),h.param('date',da.getDate()),h.param('year',da.getFullYear())]);}}function x(aa){return h._("{date} de {month} de {year}",[h.param('month',u(aa,true)),h.param('date',aa.getDate()),h.param('year',aa.getFullYear())]);}function y(aa){aa=aa||new Date();return o(aa,{zero_padding:true})+' '+n(aa);}function z(aa){var ba=3600;return Math.floor(aa/ba/1000)*ba;}f.exports={displayTime:w,displayDate:x,displayExactTime:y,roundTimestampToHour:z};}),null);
__d('MTimestamp.react',['MDateString','React','ReactUpdates','Stratcom','SubscriptionsHandler','MTimestamp','forEachObject'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o,p;if(c.__markCompiled)c.__markCompiled();var q=i.PropTypes,r=20000,s=void 0,t={},u=0,v=void 0;function w(da){var ea='ts_'+u++;t[ea]=da;if(Object.keys(t).length===1){v=new l();v.addSubscriptions(k.listen('m:page:unload',null,function(){return Object.keys(t).forEach(ba);}),k.listen('m:update-timestamps',null,function(){z();aa();y();}));y();}return ea;}function x(da){var ea=m.renderTimestamp(Math.floor((Date.now()-da)/1000),false);if(!ea)return h.displayTime(da/1000,{compact:false,show_cur_year:false});return ea;}function y(){s=setInterval(aa,r);}function z(){s!=null&&clearInterval(s);}function aa(){j.batchedUpdates(function(){return (n(t,function(da){return da.setState({displayTime:x(da.props.timestamp)});}));});}function ba(da){delete t[da];if(Object.keys(t).length===0){z();v&&v.release();v=null;}}o=babelHelpers.inherits(ca,i.Component);p=o&&o.prototype;function ca(da){p.constructor.call(this,da);this.state={displayTime:x(da.timestamp)};}ca.prototype.componentDidMount=function(){this.$MTimestamp1=w(this);};ca.prototype.componentWillReceiveProps=function(da){if(this.props.timestamp!==da.timestamp)this.setState({displayTime:x(da.timestamp)});};ca.prototype.componentWillUnmount=function(){ba(this.$MTimestamp1);};ca.prototype.render=function(){return i.createElement('abbr',null,this.state.displayTime);};ca.propTypes={timestamp:q.number.isRequired};f.exports=ca;}),null);
__d('MXUICard.react',['MXUIDiv.react','React','cx','joinClasses'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes;l=babelHelpers.inherits(o,i.Component);m=l&&l.prototype;o.prototype.render=function(){'use strict';return (i.createElement('div',{className:"_56be"},i.createElement(h,babelHelpers['extends']({},this.props,{background:'white',className:k(this.props.className,"_56bf"+(this.props.border?' '+"_55x2":'')+(this.props.overflow==='visible'?' '+"_58k5":''))}),this.props.children)));};function o(){'use strict';l.apply(this,arguments);}o.propTypes={border:n.bool,overflow:n.oneOf(['hidden','visible'])};o.defaultProps={border:true};f.exports=o;}),null);
__d('getActorFirstName',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){for(var k=0;k<j.length;k++)if(j[k].part=='first')return j[k];}function i(j){var k=j.text,l=h(j.parts);if(l)return k.substr(l.offset,l.length);return k;}f.exports=i;}),null);
__d('PhotoSetStoreCore',['KeyedCallbackManager','arrayContains'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={_controller:new h(),getBySetToken:function k(l,m){this._controller.executeOrEnqueue(l,m);},getLoadedPhotoSetTokens:function k(){return Object.keys(this._controller.getAllResources());},getBySetTokenImmediate:function k(l){return this._controller.getResource(l);},updateData:function k(l){var m=l.photo_set,n={icon:m.icon,editURL:m.edit_url,title:m.title,contributors:m.contributors,owner:m.owner,contributorsElem:m.contributors_elem,facepileElem:m.facepile_elem,modifiedTime:m.modified_time,message:m.message,mediaCount:m.media_count,ufi:m.ufi,url:m.url,story:m.story,titleCardStyle:m.title_card_style,permalink:m.permalink,feedbackTarget:m.feedback_target,feedback:m.feedback,referrerType:m.referrer_type,taggingTypeaheadConfig:m.tagging_typeahead_config,taggingTypeaheadSuggestions:m.tagging_typeahead_suggestions,reportFlow:m.report_flow},o={};o[l.set_token]=n;this._controller.addResourcesAndExecute(o);},updateFeedbackData:function k(l){var m=Object.keys(l),n=j.getLoadedPhotoSetTokens();n.forEach(function(o){var p=j.getBySetTokenImmediate(o);if(i(m,p.feedbackTarget))j._controller.setResource(o,babelHelpers['extends']({},p,{feedback:l[p.feedbackTarget].feedback}));});},updatePhotoSetStoryFeedbackData:function k(l){var m=Object.keys(l);m.forEach(function(n){var o=j.getBySetTokenImmediate(n);if(!o||!o.story)return;j._controller.setResource(n,babelHelpers['extends']({},o,{story:babelHelpers['extends']({},o.story,{feedback:l[n].feedback})}));});},reset:function k(){this._controller.reset();}};f.exports=j;}),null);
__d('MPhotoSetStore',['Stratcom','PhotoSetStoreCore'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();h.listen('m:photosetstore:update',null,function(event){i.updateData(event.getData());});h.listen('m:page:unload-complete',null,function(event){i.reset();});h.listen('m:photosetstore:reset',null,function(){i.reset();});h.listen('m:photosetstore:updatestoryfeedback',null,function(event){i.updatePhotoSetStoryFeedbackData(event.getData());});h.listen('m:photosetstore:updatefeedback',null,function(event){i.updateFeedbackData(event.getData());});f.exports=i;}),null);
__d('PhotoStoreCore',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={actions:{UPDATE:'update'},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function i(j){if(!this._photoCache[j])throw new Error('Photo cache requested for unknown set ID');return this._photoCache[j];},hasBeenCreated:function i(j){return !!this._photoCache[j];},clearSetCache:function i(j){delete this._photoCache[j];delete this._postCreateCallbacks[j];},getByIndex:function i(j,k,l){this.getPhotoCache(j).getItemAtIndex(k,l);},getByIndexImmediate:function i(j,k){if(this._photoCache[j])return this._photoCache[j].getItemAtIndexImmediate(k);return undefined;},getItemsInAvailableRange:function i(j){var k=this.getAvailableRange(j),l=[];for(var m=k.offset;m<k.length;m++)l.push(this.getByIndexImmediate(j,m));return l;},getItemsAfterIndex:function i(j,k,l,m){var n=this.getCursorByIndexImmediate(j,k);this.fetchForward(j,n,l,m);},getAllByIDImmediate:function i(j){var k=Object.keys(this._photoCache);return k.map(function(l){return this.getByIndexImmediate(l,this.getIndexForID(l,j));}.bind(this)).filter(function(l){return !!l;});},getIndexForID:function i(j,k){if(this._photoCache[j])return this._photoCache[j].getIndexForID(k);return undefined;},getEndIndex:function i(j){var k=this.getAvailableRange(j);return k.offset+k.length-1;},getCursorByIndexImmediate:function i(j,k){var l=this.getByIndexImmediate(j,k);if(l)return this._photoCache[j].getCursorForID(l.id);return undefined;},hasNextPage:function i(j){var k=this.getCursorByIndexImmediate(j,this.getEndIndex(j));return this.getPhotoCache(j).hasNextPage(k);},getAvailableRange:function i(j){return this.getPhotoCache(j).getAvailableRange();},hasLooped:function i(j){return this.getPhotoCache(j).hasLooped();},fetchForward:function i(j,k,l,m){this.getPhotoCache(j).getItemsAfterCursor(k,l,m);},fetchBackward:function i(j,k,l,m){this.getPhotoCache(j).getItemsBeforeCursor(k,l,m);},executePostCreate:function i(j,k){if(this._photoCache[j]){k&&k();}else this._postCreateCallbacks[j]=k;},runPostCreateCallback:function i(j){var k=this._postCreateCallbacks[j];if(k){k();delete this._postCreateCallbacks[j];}},setPreFetchCallback:function i(j,k){this.getPhotoCache(j).setPreFetchCallback(k);},updateData:function i(j){var k=j.set_id;if(!this._photoCache[k]){this._photoCache[k]=new j.cache_class(j);this.runPostCreateCallback(k);}else if(j.query_metadata.action==h.actions.UPDATE){this._photoCache[k].updateData(j);}else this._photoCache[k].addData(j);},updateFeedbackData:function i(j){var k=Object.keys(j);k.forEach(function(l){return h.getAllByIDImmediate(l).forEach(function(m){m.feedback=j[l].feedback;});});},reset:function i(){Object.keys(this._photoCache).forEach(function(j){return this.clearSetCache(j);}.bind(this));}};f.exports=h;}),null);
__d('MPhotoStore',['Stratcom','PhotoStoreCore'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();h.listen('m:photostore:update',null,function(event){i.updateData(event.getData());});h.listen('m:page:unload-complete',null,function(event){i.reset();});h.listen('m:photostore:reset',null,function(){i.reset();});h.listen('m:photostore:updatefeedback',null,function(event){i.updateFeedbackData(event.getData());});f.exports=i;}),null);
__d('MPhotoCentralUpdates',['Stratcom','MPhotoStore','MPhotoSetStore'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();c('MPhotoStore');c('MPhotoSetStore');var i={handleUpdate:function j(k,l){var m=babelHelpers['extends']({payloadsource:k},l);h.invoke('m:photostore:update',null,m);h.invoke('m:photostore:afterupdate',null,m);},handlePhotoSets:function j(k,l){var m=babelHelpers['extends']({payloadsource:k},l);h.invoke('m:photosetstore:update','store',m);}};f.exports=i;}),null);
__d('MLinkTracking',['URI','collectDataAttributes','MLinkHack','ClientTrackingMessage','isFacebookURI'],(function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(p){var q=o(p);if(!q)return;j.remove(p);var r=p.getAttribute('href');if(r&&r.indexOf('#')!==0){var s=new h(r);if(!l(s))return;var t=new k();t.addTrackingMessage(q);t.appendToURI(s);r=s.toString();if(r)p.setAttribute('href',r);}}function n(p,q){var r=new h(p.getURI());if(!l(r))return;var s=new k();s.addTrackingMessage(q);s.appendToURI(r);p.setURI(r.toString());}function o(p){var q=i(p,['ft']);if(!q)return;return q.ft;}f.exports={addFeedTrackingDataToHref:m,addFeedTrackingDataToRequest:n,getFeedTrackingData:o};}),null);
__d("interleaveArray",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=Object.keys(i),l=[];if(k.length>0)l.push(i[k[0]]);for(var m=1;m<k.length;++m){l.push(j);l.push(i[k[m]]);}return l;}f.exports=h;}),null);
__d('MSnowflakeHeaderMetaData.react',['React','MXUIDiv.react','MTimestamp.react','Image.react','areEqual','fbt','cx','interleaveArray'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q;if(c.__markCompiled)c.__markCompiled();var r=h.PropTypes;p=babelHelpers.inherits(s,h.Component);q=p&&p.prototype;function s(){var t,u;'use strict';for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=q.constructor).call.apply(t,[this].concat(w)),this.renderUpdatedTime=function(){if(!this.props.modifiedTime)return null;return (h.createElement(j,{timestamp:this.props.modifiedTime}));}.bind(this),this.renderLocation=function(){if(!this.props.location)return null;return this.props.location;}.bind(this),this.renderPrivacy=function(){if(!this.props.privacyScope)return null;return (h.createElement('span',{className:"_4nj-"},this.props.privacyScope.label,h.createElement(k,{className:"_3v9g",src:this.props.privacyScope.icon_image.uri,alt:this.props.privacyScope.label})));}.bind(this),u;}s.prototype.shouldComponentUpdate=function(t){'use strict';return !l(this.props,t);};s.prototype.render=function(){'use strict';var t=[this.renderUpdatedTime(),this.renderLocation(),this.renderPrivacy()].filter(function(u){return !!u;});t=o(t,h.createElement('span',null,' ','\u00B7',' '));t=t.map(function(u,v){return (h.createElement('span',{key:v},u));});if(!t.length)return h.createElement('span',null);return (h.createElement(i,{className:"_21h4"},t));};s.propTypes={modifiedTime:r.number,mediaCount:r.number,location:r.string};f.exports=s;}),null);
__d('MSnowflakeTextWithEntities.react',['BaseTextWithEntities.react','Image.react','MTextWithEmoticons.react','MEntityLink.react','React','URI','areEqual'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p;if(c.__markCompiled)c.__markCompiled();o=babelHelpers.inherits(q,l.Component);p=o&&o.prototype;function q(){var r,s;'use strict';for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=p.constructor).call.apply(r,[this].concat(u)),this.renderText=function(w){return l.createElement(j,{text:w});},this.renderEntityLink=function(w,x){return (l.createElement(k,{rel:'ignore',entity:x},w));},this.getBrowseProfilesURI=function(w){return new m('/browse/users/').addQueryData({ids:w.map(function(x){return x.id;})});},this.renderAggregatedEntitiesLink=function(w,x){return (l.createElement('a',{href:this.getBrowseProfilesURI(x.sample_entities).toString()},w));}.bind(this),this.renderImage=function(w){return (l.createElement(i,{src:w.image.uri,height:w.image.height,width:w.image.width}));},this.renderRange=function(w,x){if(x.entity_with_image)return this.renderImage(x.entity_with_image);if(x.entity)return this.renderEntityLink(w,x.entity);return this.renderAggregatedEntitiesLink(w,x);}.bind(this),s;}q.prototype.shouldComponentUpdate=function(r){'use strict';return !n(this.props,r);};q.prototype.render=function(){'use strict';var r=this.props.text;return (l.createElement(h,babelHelpers['extends']({},this.props,{textRenderer:this.renderText,rangeRenderer:this.renderRange,text:r.text,aggregatedRanges:r.aggregated_ranges,imageRanges:r.image_ranges,ranges:r.ranges})));};f.exports=q;}),null);
__d('MSnowflakeUFIAction.react',['React','Image.react','cx','joinClasses'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();l=babelHelpers.inherits(n,h.Component);m=l&&l.prototype;n.prototype.shouldComponentUpdate=function(o){'use strict';return this.props.icon!==o.icon;};n.prototype.render=function(){'use strict';return (h.createElement('a',{onClick:this.props.onClick,rel:this.props.rel,href:this.props.href,className:k("_1w31",this.props.className),'data-testid':this.props['data-testid']},h.createElement(i,{src:this.props.icon})));};function n(){'use strict';l.apply(this,arguments);}n.propTypes={icon:i.validateImageSrcPropType};n.defaultProps={href:'#',rel:'ignore'};f.exports=n;}),null);
__d('MSnowflakeUFILikeAction.react',['React','ReactDOM','MLinkTracking','MRequest','MSnowflakeUFIAction.react','Stratcom','URI','ix'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q;if(c.__markCompiled)c.__markCompiled();var r=h.PropTypes;p=babelHelpers.inherits(s,h.PureComponent);q=p&&p.prototype;function s(){var t,u;'use strict';for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=q.constructor).call.apply(t,[this].concat(w)),this.buildLikeURI=function(){return new n('/a/like/inline.php').addQueryData({ft_ent_identifier:this.props.feedbackTarget,ul:this.props.isLiked,snowflake:true,feedbackinline:true});}.bind(this),this.sendLikeRequest=function(){var y=new k(this.buildLikeURI()),z=j.getFeedTrackingData(i.findDOMNode(this));if(z)j.addFeedTrackingDataToRequest(y,z);var aa=this.props.feedbackData;y.listen('error',function(){return this.$MSnowflakeUFILikeAction1(aa);}.bind(this));y.send();}.bind(this),this.getIconSrc=function(){return this.props.isLiked?o('images/mobile/photos/snowflake/snowflake_like_button_active.png'):o('images/mobile/photos/snowflake/snowflake_like_button.png');}.bind(this),this.onClicked=function(event){this.$MSnowflakeUFILikeAction2();this.sendLikeRequest();event.stopPropagation();}.bind(this),this.$MSnowflakeUFILikeAction2=function(){var y=!this.props.isLiked,z=babelHelpers['extends']({},this.props.feedbackData);z.does_viewer_like=y;var aa=z.likers?z.likers.count:0;z.likers={count:aa+(y?1:-1)};this.$MSnowflakeUFILikeAction1(z);}.bind(this),this.$MSnowflakeUFILikeAction1=function(y){var z=this.props.feedbackUpdatingParams,event;if(z.isAlbum){event='m:photosetstore:updatefeedback';}else if(z.isPhotoSetStory){event='m:photosetstore:updatestoryfeedback';}else event='m:photostore:updatefeedback';var aa={};aa[z.targetKey]={feedback:y};m.invoke(event,null,aa);m.invoke('m:snowflakeviewstates:sync');}.bind(this),u;}s.prototype.render=function(){'use strict';return (h.createElement(l,babelHelpers['extends']({},this.props,{onClick:this.onClicked,icon:this.getIconSrc()})));};s.propTypes={feedbackData:r.object.isRequired,feedbackTarget:r.string,feedbackUpdatingParams:r.shape({isAlbum:r.bool,isPhoto:r.bool,isPhotoSetStory:r.bool,targetKey:r.string.isRequired}).isRequired,isLiked:r.bool.isRequired};f.exports=s;}),null);
__d('MSnowflakeUFIShareAction.react',['React','MSnowflakeUFIAction.react','URI','MModalDialog','ix'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,h.Component);n=m&&m.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=n.constructor).call.apply(p,[this].concat(s)),this.getShareURI=function(){return new j('/sharer-dialog.php').addQueryData({sid:this.props.feedbackTarget});}.bind(this),this.closeDialog=function(){k.close();},q;}o.prototype.render=function(){'use strict';return (h.createElement(i,{rel:null,href:this.getShareURI().toString(),icon:l('images/mobile/photos/snowflake/snowflake_share_button.png')}));};f.exports=o;}),null);
__d("XNFXDialogFromIDController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/nfx\/report\/dialog\/",{content_id:{type:"String",required:true},nfx_location:{type:"String",required:true}});}),null);
__d('MSnowflakeUFIActionBar.react',['CurrentUser','DOM','LeftRight.react','MFlyout','MRequest','MSnowflakeUFIAction.react','MSnowflakeUFILikeAction.react','MSnowflakeUFIShareAction.react','MXUIDiv.react','React','ReactDOM','SnowflakeWebDriverIDs','Vector','XNFXDialogFromIDController','areEqual','fbt','cx','getObjectValues','interleaveArray','ix','MLayerHideOnBlur'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){var ba,ca;if(c.__markCompiled)c.__markCompiled();var da=q.PropTypes,ea={DEFAULT:'default',CORNER:'corner'};ba=babelHelpers.inherits(fa,q.Component);ca=ba&&ba.prototype;function fa(){var ga,ha;'use strict';for(var ia=arguments.length,ja=Array(ia),ka=0;ka<ia;ka++)ja[ka]=arguments[ka];return ha=(ga=ca.constructor).call.apply(ga,[this].concat(ja)),this.state={shouldTruncateInteractors:false,maxInteractors:2},this.$MSnowflakeUFIActionBar4=function(){return this.props.displayStyle===ea.CORNER;}.bind(this),this.$MSnowflakeUFIActionBar2=function(){if(!this.$MSnowflakeUFIActionBar3)return;if(this.$MSnowflakeUFIActionBar4()){this.$MSnowflakeUFIActionBar3.setPosition('below');}else this.$MSnowflakeUFIActionBar3.setPosition('above');}.bind(this),this.checkInteractorsWidth=function(){if(this.refs.interactors){var la=r.findDOMNode(this.refs.interactors),ma=r.findDOMNode(this.refs.feedbackCounts),na=r.findDOMNode(this.refs.inlineFeedback),oa=t.getElementDimensions(la).y,pa=t.getElementDimensions(ma).y,qa=t.getElementDimensions(na).y;if(oa+pa>qa)if(!this.state.shouldTruncateInteractors){this.setState({shouldTruncateInteractors:true});}else if(this.state.maxInteractors>1||this.getIsUserInteractor&&this.state.maxInteractors>0)this.setState({maxInteractors:this.state.maxInteractors-1});}}.bind(this),this.getReportPhotoURI=function(){return u.getURIBuilder().setString('content_id',this.props.feedbackTarget).setString('nfx_location','photo_viewer').getURI();}.bind(this),this.renderReportItem=function(){if(!this.props.canReport)return q.createElement(p,null);return (q.createElement(p,{className:"_55i1 _58a0",onClick:function(){return new l(this.getReportPhotoURI()).send();}.bind(this)},w._("Denunciar foto")));}.bind(this),this.renderEditItem=function(){if(!this.props.editURL)return;return this.renderActionBubble(this.props.editURL,this.props.isAlbum?w._("Editar \u00e1lbum"):w._("Editar foto"));}.bind(this),this.renderActionBubble=function(la,ma){return (q.createElement('a',{rel:'ignore',href:la,className:"_55i1 _58a0"},ma));},this.renderMoreActionBubble=function(){return (q.createElement(p,{className:"_55i2",'data-testid':s.OPTIONS_MENU},this.renderEditItem(),this.renderReportItem()));}.bind(this),this.renderCommentAction=function(){if(!this.props.hasComments)return null;return (q.createElement(m,{key:'commentAction',icon:aa('images/mobile/photos/snowflake/snowflake_comment_button.png'),onClick:this.props.onToggleComments}));}.bind(this),this.getDoesViewerLike=function(){return !!this.props.feedbackData.does_viewer_like;}.bind(this),this.renderLikeAction=function(){if(!this.props.isLikable)return null;return (q.createElement(n,{key:'likeAction',feedbackData:this.props.feedbackData,feedbackTarget:this.props.feedbackTarget,feedbackUpdatingParams:this.props.feedbackUpdatingParams,isLiked:this.getDoesViewerLike()}));}.bind(this),this.renderShareAction=function(){if(!this.isShareable())return null;return (q.createElement(o,{feedbackTarget:this.props.feedbackTarget,key:'shareAction'}));}.bind(this),this.toggleTagging=function(la){this.props.onToggleTagging();la.stopPropagation();}.bind(this),this.renderTagAction=function(){if(!this.canCreateTags())return null;var la;if(this.props.isTaggingMode){la=aa('images/mobile/photos/snowflake/snowflake_tag_button_active.png');}else if(this.$MSnowflakeUFIActionBar4()){la=aa('images/mobile/photos/snowflake/snowflake_tag_button_light.png');}else la=aa('images/mobile/photos/snowflake/snowflake_tag_button.png');return (q.createElement(m,{key:'tagAction',icon:la,onClick:this.toggleTagging}));}.bind(this),this.renderMoreAction=function(){if(!this.hasMoreActions())return null;var la=this.$MSnowflakeUFIActionBar4()?aa('images/mobile/photos/snowflake/snowflake_more_button_light.png'):aa('images/mobile/photos/snowflake/snowflake_more_button.png');return (q.createElement(m,{'data-testid':s.SNOWFLAKE_MORE_ACTION,key:'moreAction',ref:'moreActionButton',icon:la}));}.bind(this),this.getLikeCount=function(){return this.props.feedbackData.likers?this.props.feedbackData.likers.count:0;}.bind(this),this.getCommentCount=function(){return this.props.feedbackData.comments?this.props.feedbackData.comments.count:0;}.bind(this),this.renderFeedbackCount=function(){var la=[this.renderLikeCount(),this.renderCommentCount()];return (q.createElement(p,{className:"_2xh_",ref:'feedbackCounts'},z(la,' ')));}.bind(this),this.renderLikeCount=function(){var la=this.getLikeCount();if(!la)return null;var ma;if(la>1){ma=w._({"*":"{likes} curtidas"},[w.param('likes',la,[0])]);}else ma=w._("{likes} curtida",[w.param('likes',1)]);return (q.createElement('span',{className:"_2xe3",key:'likeCount'},ma));}.bind(this),this.renderCommentCount=function(){var la=this.getCommentCount();if(!la)return null;var ma;if(la>1){ma=w._({"*":"{comments} coment\u00e1rios"},[w.param('comments',la,[0])]);}else ma=w._("{comments} coment\u00e1rio",[w.param('comments',1)]);return (q.createElement('span',{className:"_2xe4",key:'commentCount'},ma));}.bind(this),this.hasInteractors=function(){return !!this.getInteractors().length;}.bind(this),this.getInteractors=function(){if(!this.props.feedbackData.interactors)return [];var la=this.props.feedbackData.interactors.nodes;la=la.filter(function(ma){return ma.id!==h.getID();});return la;}.bind(this),this.getInteractorsCount=function(){if(!this.props.feedbackData.interactors)return 0;return this.props.feedbackData.interactors.count;}.bind(this),this.getIsUserInteractor=function(){return this.props.feedbackData.does_viewer_like||this.props.feedbackData.has_viewer_commented_recently;}.bind(this),this.renderInteractors=function(){var la=this.getIsUserInteractor(),ma=this.getInteractors().map(function(ua){return ua.name;});if(la){var na=w._("Voc\u00ea");ma.splice(0,0,na);}var oa=this.getInteractorsCount();if(oa===0){return null;}else if(oa==1){return ma[0];}else if(!this.state.shouldTruncateInteractors&&oa==ma.length){var pa=ma[oa-1],qa=ma.slice(0,oa-1).join(', ');return w._("{seperatedInteractors} e {lastInteractor}",[w.param('seperatedInteractors',qa),w.param('lastInteractor',pa)]);}else{var ra=this.state.maxInteractors,sa=oa-ra,ta=ma.slice(0,ra).join(', ');if(ra===0){return null;}else return w._("{firstInteractors} e mais {moreCount} pessoas",[w.param('firstInteractors',ta),w.param('moreCount',sa)]);}}.bind(this),this.renderFeedbackSocialText=function(){if(!this.hasInteractors()){if(this.getCommentCount()||this.getLikeCount())return (q.createElement(p,null,w._("Escreva um coment\u00e1rio")));}else return (q.createElement(p,{className:"_2g6d",ref:'interactors'},this.renderInteractors()));return null;}.bind(this),this.isShareable=function(){return this.props.isShareable;}.bind(this),this.canCreateTags=function(){return this.props.canCreateTags;}.bind(this),this.notImplementedMessage=function(la){la.stopPropagation();b.alert('Not yet implemented');},this.hasMoreActions=function(){return this.props.canReport||this.props.editURL;}.bind(this),this.$MSnowflakeUFIActionBar5=function(la){return (q.createElement('div',{className:"_40qv"},la));},this.$MSnowflakeUFIActionBar6=function(la){return (q.createElement('div',{className:"_51cd"},q.createElement(j,{className:"_2xi0",ref:'inlineFeedback'},q.createElement(p,{ref:'actions',className:"_2j65"},la),q.createElement(p,{onClick:this.props.onToggleComments},this.renderFeedbackCount(),this.renderFeedbackSocialText()))));}.bind(this),ha;}fa.prototype.shouldComponentUpdate=function(ga,ha){'use strict';return !v(this.props,ga)||!v(this.state,ha);};fa.prototype.componentDidUpdate=function(ga,ha){'use strict';this.checkInteractorsWidth();this.$MSnowflakeUFIActionBar2();};fa.prototype.componentDidMount=function(){'use strict';this.checkInteractorsWidth();if(this.hasMoreActions()){this.$MSnowflakeUFIActionBar1=i.create('div');r.render(this.renderMoreActionBubble(),this.$MSnowflakeUFIActionBar1);this.$MSnowflakeUFIActionBar3=new k({nubalign:'center',offsetY:0,position:this.$MSnowflakeUFIActionBar4()?'below':'above',margin:'medium',width:'auto',addedBehaviors:[c('MLayerHideOnBlur')],context:r.findDOMNode(this.refs.moreActionButton)},this.$MSnowflakeUFIActionBar1);}};fa.prototype.componentWillUnmount=function(){'use strict';if(this.$MSnowflakeUFIActionBar3){this.$MSnowflakeUFIActionBar3.destroy();this.$MSnowflakeUFIActionBar3=null;}if(this.$MSnowflakeUFIActionBar1){r.unmountComponentAtNode(this.$MSnowflakeUFIActionBar1);delete this.$MSnowflakeUFIActionBar1;}};fa.prototype.render=function(){'use strict';var ga=[this.renderLikeAction(),this.renderCommentAction(),this.renderShareAction(),this.renderTagAction(),this.renderMoreAction()].filter(function(ha){return !!ha;});if(!ga.length)return null;if(this.$MSnowflakeUFIActionBar4()){return this.$MSnowflakeUFIActionBar5(ga);}else return this.$MSnowflakeUFIActionBar6(ga);};fa.DISPLAY_STYLES=ea;fa.propTypes={displayStyle:da.oneOf(y(ea)),isLikable:da.bool.isRequired,hasComments:da.bool.isRequired,isShareable:da.bool.isRequired,editURL:da.string,isTaggingMode:da.bool.isRequired,isAlbum:da.bool,canCreateTags:da.bool.isRequired,feedbackTarget:da.string,feedbackData:da.object.isRequired,feedbackUpdatingParams:da.shape({isAlbum:da.bool,isPhoto:da.bool,isPhotoSetStory:da.bool,targetKey:da.string.isRequired}).isRequired,onToggleTagging:da.func.isRequired,onToggleComments:da.func.isRequired,hasPrerenderedActionsUFI:da.bool};fa.defaultProps={displayStyle:ea.DEFAULT};f.exports=fa;}),null);
__d('MSnowflakeUFI.react',['CSS','DOM','DOMContainer.react','MSnowflakeUFIActionBar.react','MXUIDiv.react','React','SnowflakeWebDriverIDs','areEqual','csx','cx','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s,t;if(c.__markCompiled)c.__markCompiled();var u=m.PropTypes,v='inline-action-bar';s=babelHelpers.inherits(w,m.Component);t=s&&s.prototype;function w(){var x,y;'use strict';for(var z=arguments.length,aa=Array(z),ba=0;ba<z;ba++)aa[ba]=arguments[ba];return y=(x=t.constructor).call.apply(x,[this].concat(aa)),this.state={collapsed:this.props.initialIsCollapsed},this.toggleCollapsed=function(){this.setState({collapsed:!this.state.collapsed,focusComments:true});}.bind(this),this.focusComments=function(){this.setState({collapsed:false,focusComments:true});}.bind(this),this.$ReactSnowflakeUFI1=function(){var ca=i.scry(this.props.ufi,'*',v);ca=ca.length&&ca[0];return ca||null;}.bind(this),this.renderPrerenderedUFI=function(){var ca=this.props.ufi;if(!ca)return null;var da=this.$ReactSnowflakeUFI1();if(da)h.addClass(da,"_1dia");var ea="_2xi1"+(this.state.collapsed?' '+"_2xi2":'');return (m.createElement(l,{className:ea,'data-testid':n.UFI},m.createElement(j,null,ca)));}.bind(this),this.renderActionBar=function(){var ca=!!this.$ReactSnowflakeUFI1(),da=this.props.feedbackUpdatingParams.isPhoto,ea=ca&&da?k.DISPLAY_STYLES.CORNER:k.DISPLAY_STYLES.DEFAULT;return (m.createElement(k,{displayStyle:ea,isLikable:!ca,hasComments:!ca&&!!this.props.ufi,isShareable:!ca&&this.props.isShareable,isAlbum:this.props.isAlbum,editURL:this.props.editURL,isTaggingMode:this.props.isTaggingMode,canReport:this.props.canReport,canCreateTags:this.props.canCreateTags,feedbackTarget:this.props.feedbackTarget,feedbackData:this.props.feedbackData,feedbackUpdatingParams:this.props.feedbackUpdatingParams,onToggleTagging:this.props.onToggleTagging,onToggleComments:this.focusComments}));}.bind(this),y;}w.prototype.shouldComponentUpdate=function(x,y){'use strict';return !o(this.props,x)||!o(this.state,y);};w.prototype.componentDidUpdate=function(x,y){'use strict';if(this.state.focusComments){if(this.props.ufi){this.props.ufi.scrollIntoView(false);this.props.ufi.querySelector("._uwx").focus();}this.setState({focusComments:false});}};w.prototype.render=function(){'use strict';return (m.createElement(l,null,this.renderActionBar(),this.renderPrerenderedUFI()));};w.propTypes={isShareable:u.bool,isAlbum:u.bool,editURL:u.string,isTaggingMode:u.bool,initialIsCollapsed:u.bool,canCreateTags:u.bool,ufi:u.instanceOf(HTMLElement),feedbackTarget:u.string,feedbackData:u.object.isRequired,feedbackUpdatingParams:u.shape({isAlbum:u.bool,isPhoto:u.bool,isPhotoSetStory:u.bool,targetKey:u.string.isRequired}).isRequired,onToggleTagging:u.func};w.defaultProps={isShareable:false,isTaggingMode:false,canCreateTags:false,initialIsCollapsed:true,onToggleTagging:r};f.exports=w;}),null);
__d('MSnowflakeAlbumHeaderCard.react',['React','MSnowflakeTextWithEntities.react','MXUICard.react','MXUIDiv.react','MXUISpan.react','MSnowflakeHeaderMetaData.react','MSnowflakeUFI.react','MEntityLink.react','SnowflakeWebDriverIDs','areEqual','cx','interleaveArray'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t,u;if(c.__markCompiled)c.__markCompiled();var v=h.PropTypes,w=v.object;t=babelHelpers.inherits(x,h.Component);u=t&&t.prototype;function x(){var y,z;'use strict';for(var aa=arguments.length,ba=Array(aa),ca=0;ca<aa;ca++)ba[ca]=arguments[ca];return z=(y=u.constructor).call.apply(y,[this].concat(ba)),this.renderMessage=function(){if(!this.props.message)return null;return (h.createElement(k,{className:"_26p9"},h.createElement(i,{text:this.props.message})));}.bind(this),this.renderMetaData=function(){return (h.createElement(m,{location:this.props.location,modifiedTime:this.props.modifiedTime,mediaCount:this.props.mediaCount,privacyScope:this.props.privacyScope}));}.bind(this),this.renderContributors=function(){if(!this.props.contributors||!this.props.contributors.length)return null;var da=[this.props.owner].concat(this.props.contributors.filter(function(fa){return fa.id!==this.props.owner.id;}.bind(this))),ea=s(da.map(function(fa,ga){return (h.createElement(l,{className:"_5v15",key:ga},h.createElement(o,{entity:fa},fa.name)));}),', ');return (h.createElement(k,{className:"_5v16"},'By ',ea));}.bind(this),this.renderUFI=function(){return (h.createElement(n,{ufi:this.props.ufi,feedbackTarget:this.props.feedbackTarget,feedbackUpdatingParams:{isAlbum:true,targetKey:this.props.feedbackTarget},isShareable:true,feedbackData:this.props.feedback,initialIsCollapsed:this.props.initialIsUFICollapsed}));}.bind(this),this.renderTitle=function(){var da=this.props.title;if(da&&da.text)da=da.text;return (h.createElement(k,{className:"_9j8"},da));}.bind(this),z;}x.prototype.shouldComponentUpdate=function(y){'use strict';return !q(this.props,y);};x.prototype.render=function(){'use strict';return (h.createElement(j,{className:"_4zvh",'data-testid':p.HEADER_CARD},h.createElement(k,{className:"_tmc"},this.renderTitle(),this.renderContributors(),this.renderMessage(),this.renderMetaData()),this.renderUFI()));};x.propTypes={feedbackTarget:v.string.isRequired,feedback:v.object.isRequired,message:v.object,modifiedTime:v.number,mediaCount:v.number,title:v.oneOfType([v.string,w]).isRequired,contributors:v.arrayOf(v.object),owner:v.object,initialIsUFICollapsed:v.bool,ufi:v.instanceOf(HTMLElement)};f.exports=x;}),null);
__d('MSnowflakePagerCard.react',['React','MXUICard.react','MXUIDiv.react','OnVisible.react','MLoadingSpinner.react','FullBleedFeedQE','cx'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p;if(c.__markCompiled)c.__markCompiled();o=babelHelpers.inherits(q,h.Component);p=o&&o.prototype;q.prototype.render=function(){'use strict';if(m.fullBleed){return (h.createElement(j,{className:"_45_8"},h.createElement(k,{onVisible:this.props.onFetchMore},h.createElement(l,null))));}else return (h.createElement(i,{className:"_45_8"},h.createElement(k,{onVisible:this.props.onFetchMore},h.createElement(l,null))));};function q(){'use strict';o.apply(this,arguments);}f.exports=q;}),null);
__d('MSnowflakePhotoCardFacebox.react',['React','cx'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes;j=babelHelpers.inherits(m,h.Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MSnowflakePhotoCardFacebox1=function(){this.props.onFaceboxSelected&&this.props.onFaceboxSelected(this.props.facebox);}.bind(this),o;}m.prototype.render=function(){'use strict';var n=this.props.facebox,o={top:n.top+"%",left:n.left+"%",width:n.width+"%",height:n.height+"%"};return (h.createElement('div',{className:"_5piq",style:o,onClick:this.$MSnowflakePhotoCardFacebox1}));};m.propTypes={facebox:l.object,onFaceboxSelected:l.func};f.exports=m;}),null);
__d('MSnowflakePhotoCardTagArrowDirection',['keyMirror'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=h({UP:null,DOWN:null,LEFT:null,RIGHT:null,UP_RIGHT:null,DOWN_LEFT:null,UP_LEFT:null,DOWN_RIGHT:null,NO_DIRECTION:null});f.exports=i;}),null);
__d('MeasuredComponent.react',['EventListener','React','ReactDOM','SubscriptionsHandler','emptyFunction','requestAnimationFrame'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o;if(c.__markCompiled)c.__markCompiled();var p=i.PropTypes;n=babelHelpers.inherits(q,i.Component);o=n&&n.prototype;function q(){var r,s;'use strict';for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=o.constructor).call.apply(r,[this].concat(u)),this.attachEventListeners=function(w){this.$MeasuredComponent1.engage();k.prototype.addSubscriptions.apply(this.$MeasuredComponent1,w.map(function(x){return (h.listen(b,x,this.measure));}.bind(this)));}.bind(this),this.detachEventListeners=function(){this.$MeasuredComponent1.release();}.bind(this),this.measure=function(){var w=j.findDOMNode(this).getBoundingClientRect();this.props.onMeasure(w);}.bind(this),s;}q.prototype.componentWillReceiveProps=function(r){'use strict';if(r.measureOnEvents!==this.props.measureOnEvents){this.detachEventListeners();this.attachEventListeners(r.measureOnEvents);}};q.prototype.componentDidUpdate=function(r,s){'use strict';if(this.props.shouldRemeasure(r.children,this.props.children))this.measure();};q.prototype.componentDidMount=function(){'use strict';this.$MeasuredComponent1=new k();this.attachEventListeners(this.props.measureOnEvents);m(this.measure);};q.prototype.componentWillUnmount=function(){'use strict';this.detachEventListeners();this.$MeasuredComponent1=null;};q.prototype.render=function(){'use strict';return i.Children.only(this.props.children);};q.propTypes={onMeasure:p.func.isRequired,measureOnEvents:p.array,shouldRemeasure:p.func};q.defaultProps={onMeasure:l,measureOnEvents:['resize','orientationchange'],shouldRemeasure:l.thatReturnsFalse};f.exports=q;}),null);
__d('MSnowflakePhotoCardTag.react',['cx','emptyFunction','MeasuredComponent.react','React','MSnowflakePhotoCardTagArrowDirection'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();var o=k.PropTypes;m=babelHelpers.inherits(p,k.Component);n=m&&m.prototype;function p(r){'use strict';n.constructor.call(this,r);q.call(this);var s=r.facebox;this.state={defaultLeft:s.x,defaultTop:s.top+s.height,realPosition:false,clientRect:null};}p.prototype.render=function(){'use strict';var r=this.props.facebox,s=this.getAdjustedPosition(),t={left:s.left+'%',top:s.top+'%',visibility:this.state.clientRect?'visible':'hidden'};return (k.createElement(j,{onMeasure:this.updateClientRect},k.createElement('div',{className:"_e3g"+(this.props.tagArrowDirection===l.UP?' '+"_1gvp":''),style:t},k.createElement('div',{className:"_e3h"},r.tagName),this.renderDeleteButton(r))));};p.propTypes={facebox:o.object.isRequired,position:o.object,tagArrowDirection:o.string,onTagDelete:o.func.isRequired,onTagMeasured:o.func,parentRect:o.object.isRequired,canDelete:o.bool};p.defaultProps={onTagDelete:i,canDelete:true,tagArrowDirection:l.UP};var q=function r(){this.updateClientRect=function(s){this.setState({clientRect:s});if(this.props.onTagMeasured)this.props.onTagMeasured(this.props.facebox,s);}.bind(this);this.getAdjustedPosition=function(){var s=this.props.parentRect,t=s.width,u=s.height,v=void 0,w=void 0;if(this.props.position){v=this.props.position.left;w=this.props.position.top;}else{var x=this.state.defaultLeft*t/100,y=this.state.defaultTop*u/100;v=x;w=y;if(this.state.clientRect){var z=this.state.clientRect.width,aa=this.state.clientRect.height;v=Math.max(0,x-z/2);v=Math.min(v,t-z);w=Math.max(0,y-aa/2);w=Math.min(y,u-aa);}}return {left:v/t*100,top:w/u*100};}.bind(this);this.renderDeleteButton=function(s){if(!this.props.canDelete)return null;return k.createElement('div',{className:"_e3j",onClick:function(){return this.props.onTagDelete(s);}.bind(this),'data-sigil':'touchable'});}.bind(this);};f.exports=p;}),null);
__d('getScrollPosition',['getDocumentScrollElement','getUnboundedScrollPosition'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k){var l=h(k.ownerDocument||k.document);if(k.Window&&k instanceof k.Window)k=l;var m=i(k),n=k===l?k.ownerDocument.documentElement:k,o=k.scrollWidth-n.clientWidth,p=k.scrollHeight-n.clientHeight;m.x=Math.max(0,Math.min(m.x,o));m.y=Math.max(0,Math.min(m.y,p));return m;}f.exports=j;}),null);
__d('MSnowflakePhotoCardTagger.react',['React','ReactDOM','MSnowflakePhotoCardFacebox.react','MSnowflakePhotoCardTag.react','MTaggerTypeaheadPresenter.react','MTokenizer.react','MeasuredComponent.react','MTagSuggestionsController','Vector','UserAgent','cx','fbt','getElementPosition','getScrollPosition','areEqual','FamilyTaggingConfig'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x,y;if(c.__markCompiled)c.__markCompiled();var z=h.PropTypes,aa=200,ba=10;x=babelHelpers.inherits(ca,h.Component);y=x&&x.prototype;function ca(ea){'use strict';y.constructor.call(this,ea);da.call(this);var fa={};if(ea.initialFaceboxes)Object.assign(fa,ea.initialFaceboxes);this.state={faceboxes:fa,tagsWithoutFaceboxes:ea.initialTags||{},activeFacebox:null,clientRect:null};}ca.prototype.componentWillReceiveProps=function(ea){'use strict';if(!v(this.state.faceboxes,ea.initialFaceboxes))this.setState({faceboxes:ea.initialFaceboxes,activeFacebox:null});};ca.prototype.componentDidMount=function(){'use strict';this.refs.tokenizer.initWithoutFocus();};ca.prototype.componentWillUnmount=function(){'use strict';this.refs.tokenizer.cleanup();};ca.prototype.componentDidUpdate=function(){'use strict';if(this.needFocus){this.needFocus=false;var ea=this.state.activeFacebox,fa=[];if(!ea.ignoreRecognition)fa=ea.recognitions.map(function(ga){return ga.user.fbid;});this.refs.tokenizer.focusAndUpdateSuggestionsIDs(fa);}};ca.prototype.render=function(){'use strict';var ea=h.Children.only(this.props.children),fa=[],ga=[];if(!this.props.imageIsLoading){var ha=this.state.faceboxes;for(var ia in ha){var ja=ha[ia];if(ja.tagUserID){ga.push(this.$SnowflakePhotoCardTagger5(ja));}else fa.push(this.$SnowflakePhotoCardTagger6(ja));}Array.prototype.push.apply(ga,Object.keys(this.state.tagsWithoutFaceboxes).map(function(ka){return this.$SnowflakePhotoCardTagger5(this.state.tagsWithoutFaceboxes[ka]);}.bind(this)));}return (h.createElement(n,{onMeasure:this.updateClientRect},h.createElement('div',{className:"_1k3"},h.createElement('div',{onClick:this.handleImageClick},ea),fa,ga,this.$SnowflakePhotoCardTagger4())));};ca.propTypes={initialFaceboxes:z.object,initialTags:z.object,onTagAdd:z.func,onTagDelete:z.func,typeaheadConfig:z.object.isRequired,typeaheadSuggestions:z.array,freeformTagging:z.bool.isRequired,imageIsLoading:z.bool};var da=function ea(){this.hasTags=function(){return this.hasTagsWithoutFaceboxes()||this.hasTaggedFaceboxes();}.bind(this);this.hasTagsWithoutFaceboxes=function(){return Object.keys(this.state.tags).length;}.bind(this);this.hasTaggedFaceboxes=function(){return Object.keys(this.state.faceboxes).any(function(fa){return !!this.state.faceboxes[fa].tagUserID;}.bind(this));}.bind(this);this.resetTokenizer=function(){this.setState({activeFacebox:null});}.bind(this);this.$SnowflakePhotoCardTagger1=function(fa){this.needFocus=true;this.setState({activeFacebox:fa});}.bind(this);this.$SnowflakePhotoCardTagger2=function(){this.setState({activeFacebox:null});}.bind(this);this.$SnowflakePhotoCardTagger3=function(fa){this.refs.tokenizer.setEntries([]);var ga=this.state.activeFacebox;o.addFaceboxData(ga,fa.name,fa.id);if(ga.fbid){var ha=this.state.faceboxes;ha[ga.fbid]=ga;this.setState({activeFacebox:null,faceboxes:ha});}else{var ia=this.state.tagsWithoutFaceboxes;ia[ga.tagUserID]=ga;this.setState({activeFacebox:null,tagsWithoutFaceboxes:ia});}this.props.onTagAdd&&this.props.onTagAdd(ga);}.bind(this);this.$SnowflakePhotoCardTagger4=function(){var fa={display:'none'},ga={},ha=this.state.activeFacebox;if(this.state.activeFacebox){var ia=this.state.clientRect.width,ja=ia*ha.width/100,ka=ha.left*ia/100;fa={top:ha.top+ha.height+"%",width:aa};var la=ka+(ja-aa)/2;la=Math.max(0,la);la=Math.min(la,ia-aa);fa.left=la;var ma=this.state.faceboxes;for(var na in ma){ha=ma[na];if(ha.tagUserID)ga[ha.tagUserID]=true;}Object.keys(this.state.tagsWithoutFaceboxes).forEach(function(qa){return ga[qa]=true;});}var oa=s._("Comece a digitar um nome..."),pa=w.gk;return h.createElement('div',{style:fa,className:"_4uod"},h.createElement(m,{ref:'tokenizer',presenter:l,typeaheadConfig:this.props.typeaheadConfig,hideSelected:true,suggestions:this.props.typeaheadSuggestions,onAdd:this.$SnowflakePhotoCardTagger3,includeFamilyTags:pa,excludedEntries:ga,placeholder:oa,maxSuggestionCount:ba}));}.bind(this);this.$SnowflakePhotoCardTagger5=function(fa){if(!this.state.clientRect)return null;return h.createElement(k,{canDelete:fa.canRemove,key:fa.tagUserID,parentRect:this.state.clientRect,facebox:fa,onTagDelete:this.onTagDelete});}.bind(this);this.$SnowflakePhotoCardTagger6=function(fa){return h.createElement(j,{key:fa.fbid,facebox:fa,onFaceboxSelected:this.$SnowflakePhotoCardTagger1});}.bind(this);this.handleImageClick=function(fa){fa.stopPropagation();if(this.state.activeFacebox){this.$SnowflakePhotoCardTagger2();}else if(this.props.freeformTagging){var ga=t(i.findDOMNode(this)),ha=u(window),ia=new p(fa.clientX,fa.clientY).sub(p.from(ga.x,ga.y));if(q.isBrowser('Chrome > 18'))ia=ia.sub(p.from(ha.x,ha.y));this.createFreeFormTag(ia.x,ia.y);}}.bind(this);this.createFreeFormTag=function(fa,ga){var ha=this.state.clientRect,ia={x:fa/ha.width*100,y:ga/ha.height*100,width:10,height:10,left:(fa-5)/ha.width*100,top:(ga-5)/ha.height*100,recognitions:[]};this.$SnowflakePhotoCardTagger1(ia);}.bind(this);this.updateClientRect=function(fa){this.setState({clientRect:fa});}.bind(this);this.onTagDelete=function(fa){this.props.onTagDelete&&this.props.onTagDelete(fa);var ga=this.state.faceboxes;if(fa.fbid){o.deleteFaceboxData(fa);ga[fa.fbid]=fa;this.setState({faceboxes:ga});}else{delete this.state.tagsWithoutFaceboxes[fa.tagUserID];this.setState({tagsWithoutFaceboxes:this.state.tagsWithoutFaceboxes});}}.bind(this);};f.exports=ca;}),null);
__d("XPhotosEditPhotoController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/photos\/edit\/{id}\/",{id:{type:"FBID",required:true},notice_id:{type:"Int"},delete_cancelled:{type:"Exists",defaultValue:false}});}),null);
__d('MSnowflakePhotoCard.react',['React','Image.react','MSnowflakeUFI.react','MSnowflakeTextWithEntities.react','MXUICard.react','MXUIDiv.react','MSnowflakePhotoCardTagger.react','FullBleedFeedQE','SnowflakeWebDriverIDs','XPhotosEditPhotoController','cx','emptyFunction','joinClasses','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v,w;if(c.__markCompiled)c.__markCompiled();var x=h.PropTypes;v=babelHelpers.inherits(y,h.Component);w=v&&v.prototype;function y(){var z,aa;'use strict';for(var ba=arguments.length,ca=Array(ba),da=0;da<ba;da++)ca[da]=arguments[da];return aa=(z=w.constructor).call.apply(z,[this].concat(ca)),this.state={taggingMode:this.props.initialTaggingMode},this.renderMessage=function(){if(!this.props.message)return null;return (h.createElement(m,{className:"_26p9",key:'message'},h.createElement(k,{text:this.props.message})));}.bind(this),this.getEditURL=function(){if(!this.props.canEdit||!this.props.photoID)return null;return q.getURIBuilder().setFBID('id',this.props.photoID).getURI().toString();}.bind(this),this.renderUFI=function(){if(!this.props.ufi)return null;return (h.createElement(j,{ufi:this.props.ufi,editURL:this.getEditURL(),isTaggingMode:this.state.taggingMode,initialIsCollapsed:this.props.initialIsUFICollapsed,canReport:this.props.canReport,canCreateTags:this.canCreateTags(),onToggleTagging:this.toggleTaggingMode,feedbackData:this.props.feedbackData,feedbackTarget:this.props.feedbackTarget,feedbackUpdatingParams:{isPhoto:true,targetKey:this.props.feedbackTarget},key:'ufi'}));}.bind(this),this.toggleTaggingMode=function(){this.setState({taggingMode:!this.state.taggingMode});}.bind(this),this.deactivateTaggingMode=function(){this.setState({taggingMode:false});}.bind(this),this.renderBody=function(){var ea=[this.renderMessage(),this.renderUFI()].filter(function(ga){return !!ga;});if(!ea.length)return null;var fa="_2hao _55x2";return (h.createElement(m,{className:fa},ea));}.bind(this),this.canCreateTags=function(){return this.props.canCreateTags;}.bind(this),this.canDeleteTags=function(){return this.props.canDeleteTags&&this.hasTags();}.bind(this),this.hasTags=function(){return this.refs.photoCardTagger.hasTags();}.bind(this),this.canActivateTaggingMode=function(){return (this.canCreateTags()||this.canDeleteTags())&&!this.state.taggingMode;}.bind(this),this.renderBasicImage=function(){if(!this.props.imageSrc)return h.createElement('div',null);var ea={};if(this.props.imageWidth)ea.width=this.props.imageWidth;if(this.props.imageHeight)ea.height=this.props.imageHeight;if(this.props.isPlayable&&this.props.playableURL)return (h.createElement('video',{className:"_1_uo",style:ea,src:this.props.playableURL,poster:this.props.imageSrc,controls:true}));return (h.createElement('div',{className:"_i81"},h.createElement(i,{className:"_1_uo",style:ea,src:this.props.imageSrc})));}.bind(this),this.renderImage=function(){if(!this.state.taggingMode)return this.renderBasicImage();return (h.createElement(n,{ref:'photoCardTagger',initialFaceboxes:this.props.initialFaceboxes,initialTags:this.props.initialTags,freeformTagging:this.props.freeformTagging,onTagAdd:this.props.onTagAdd,onTagDelete:this.props.onTagDelete,typeaheadConfig:this.props.typeaheadConfig,typeaheadSuggestions:this.props.typeaheadSuggestions},this.renderBasicImage()));}.bind(this),aa;}y.prototype.componentWillUpdate=function(z,aa){'use strict';!(!aa.taggingMode||z.canCreateTags)?u(0):void 0;if(!this.state.taggingMode&&aa.taggingMode)this.props.onActivateTagging(this);};y.prototype.render=function(){'use strict';var z=t(this.props.className,"_26pa"+(this.state.taggingMode?' '+"_i82":'')+(' '+"_55x2"));return (h.createElement(l,{background:o.fullBleed?'white':null,className:z,'data-index':this.props.index,'data-testid':p.PHOTO_CARD},this.renderImage(),this.renderBody()));};y.propTypes={message:x.object,imageSrc:x.string,photoID:x.string,canEdit:x.bool,imageHeight:x.number,imageWidth:x.number,canCreateTags:x.bool,ufi:x.instanceOf(HTMLElement),feedbackTarget:x.string,isPreviewMode:x.bool,initialFaceboxes:x.object,initialTags:x.object,initialTaggingMode:x.bool,onTagAdd:x.func,onTagDelete:x.func,onActivateTagging:x.func,typeaheadConfig:x.object,initialIsUFICollapsed:x.bool,typeaheadSuggestions:x.array,isPlayable:x.bool,playableURL:x.string,playableURLHD:x.string};y.defaultProps={canEdit:false,canCreateTags:false,canDeleteTags:false,initialTaggingMode:false,onActivateTagging:s,freeformTagging:true};f.exports=y;}),null);
__d('MSnowflakePhotoImpressionLogger',['BanzaiLogger','PhotosContentViewingSurfaces'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={logPhotoViewed:function k(l){l.referrer=l.referrer||{};h.log('PhotoImpressionsLoggerConfig',{action:l.actionType,action_direction:l.actionDirection,logtype:l.logType,content_id:l.photo.id,owner_id:l.photo.owner.id,referrer:l.referrer.referrer,referrer_id:l.referrer.referrer_id,referrer_type:l.referrer.referrer_type,viewing_surface:i.SNOWFLAKE});}};f.exports=j;}),null);
__d('MSnowflakeStoryHeaderCard.react',['React','MSnowflakeTextWithEntities.react','MTimestamp.react','MXUICard.react','MXUIDiv.react','MSnowflakeHeaderMetaData.react','MSnowflakeUFI.react','Image.react','MEntityLink.react','FullBleedFeedQE','SnowflakeWebDriverIDs','areEqual','cx'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u,v;if(c.__markCompiled)c.__markCompiled();var w=h.PropTypes,x=w.object;u=babelHelpers.inherits(y,h.Component);v=u&&u.prototype;function y(){var z,aa;'use strict';for(var ba=arguments.length,ca=Array(ba),da=0;da<ba;da++)ca[da]=arguments[da];return aa=(z=v.constructor).call.apply(z,[this].concat(ca)),this.renderMessage=function(){if(!this.props.message)return null;return (h.createElement(l,{className:"_26p9"},h.createElement(i,{text:this.props.message})));}.bind(this),this.renderMetaData=function(){return (h.createElement(m,{mediaCount:this.props.mediaCount}));}.bind(this),this.renderUFI=function(){if(!this.props.ufi)return null;return (h.createElement(n,{isAlbum:this.props.isAlbumStory,editURL:this.props.editURL,ufi:this.props.ufi,feedbackTarget:this.props.feedbackTarget,isShareable:this.props.isShareable,feedbackData:this.props.feedback,initialIsCollapsed:this.props.initialIsUFICollapsed,feedbackUpdatingParams:{isPhotoSetStory:true,targetKey:this.props.setToken}}));}.bind(this),this.renderStoryHeader=function(){return (h.createElement(l,{className:"_3v9e"},this.renderProfilePic(),h.createElement(l,{className:"_3v9f"},this.renderStoryTitle(),this.renderStoryMetaData())));}.bind(this),this.renderTimestamp=function(){return h.createElement(j,{timestamp:this.props.creationTime});}.bind(this),this.renderPrivacyScope=function(){if(!this.props.privacyScope)return null;return (h.createElement(o,{className:"_3v9g",src:this.props.privacyScope.icon_image.uri,alt:this.props.privacyScope.label}));}.bind(this),this.renderStoryMetaData=function(){return (h.createElement(l,{className:"_3v9h"},this.renderTimestamp(),this.renderPrivacyScope()));}.bind(this),this.renderStoryTitle=function(){var ea=this.props.title;if(!ea)return this.renderMainActor();return (h.createElement(l,null,h.createElement(i,{text:ea})));}.bind(this),this.renderMainActor=function(){var ea=this.getMainActor();return (h.createElement(l,{className:"_3kz9"},h.createElement(p,{entity:ea},ea.name)));}.bind(this),this.getMainActor=function(){var ea=this.props.actors;return ea&&ea[0]||{};}.bind(this),this.renderProfilePic=function(){var ea=this.getMainActor().profile_picture;if(!ea)return null;return (h.createElement(o,{className:"_3v9i",src:ea.uri}));}.bind(this),aa;}y.prototype.shouldComponentUpdate=function(z){'use strict';return !s(this.props,z);};y.prototype.render=function(){'use strict';if(q.fullBleed)return (h.createElement(l,{background:'white',className:"_55x2 _4zvh",'data-testid':r.HEADER_CARD},h.createElement(l,{className:"_tmc"},this.renderStoryHeader(),this.renderMessage(),this.renderMetaData()),this.renderUFI()));return (h.createElement(k,{className:"_4zvh",'data-testid':r.HEADER_CARD},h.createElement(l,{className:"_tmc"},this.renderStoryHeader(),this.renderMessage(),this.renderMetaData()),this.renderUFI()));};y.propTypes={actors:w.array,creationTime:w.number,isAlbumStory:w.bool,editURL:w.string,feedback:w.object,initialIsUFICollapsed:w.bool,isShareable:w.bool,message:x,modifiedTime:w.number,mediaCount:w.number,privacyScope:w.object,setToken:w.string.isRequired,title:x,ufi:w.instanceOf(HTMLElement)};f.exports=y;}),null);
__d('ScrollablePhotoViewStateCore',['emptyFunction','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this.$ScrollablePhotoViewStateCore1=k.photoStore;this.$ScrollablePhotoViewStateCore2=k.viewer;this.$ScrollablePhotoViewStateCore3=k.setToken;this.$ScrollablePhotoViewStateCore4=k.updateCallback;this.$ScrollablePhotoViewStateCore5=k.subscribeUpdatePhotos;this.$ScrollablePhotoViewStateCore6=k.fetchInitData;this.$ScrollablePhotoViewStateCore7=k.initBatchSize;this.$ScrollablePhotoViewStateCore8=k.pageBatchSize;this.$ScrollablePhotoViewStateCore9=new i();}j.prototype.initViewState=function(){'use strict';this.$ScrollablePhotoViewStateCore9.addSubscriptions(this.$ScrollablePhotoViewStateCore5(this.updateData.bind(this)));if(this.$ScrollablePhotoViewStateCore1.hasBeenCreated(this.$ScrollablePhotoViewStateCore3)){var k=this.$ScrollablePhotoViewStateCore1.getAvailableRange(this.$ScrollablePhotoViewStateCore3).length;if(k>=this.$ScrollablePhotoViewStateCore7||!this.$ScrollablePhotoViewStateCore1.hasNextPage(this.$ScrollablePhotoViewStateCore3))this.syncState();return;}this.$ScrollablePhotoViewStateCore6(this.$ScrollablePhotoViewStateCore3);};j.prototype.hasNextPage=function(){'use strict';return (this.$ScrollablePhotoViewStateCore1.hasBeenCreated(this.$ScrollablePhotoViewStateCore3)&&this.$ScrollablePhotoViewStateCore1.hasNextPage(this.$ScrollablePhotoViewStateCore3));};j.prototype.fetchToIndex=function(k){'use strict';var l=this.$ScrollablePhotoViewStateCore1.getEndIndex(this.$ScrollablePhotoViewStateCore3),m=k-l;if(m<=0)return;this.$ScrollablePhotoViewStateCore1.getItemsAfterIndex(this.$ScrollablePhotoViewStateCore3,l,m,h);};j.prototype.fetchMore=function(k){'use strict';if(!this.hasNextPage())return;this.$ScrollablePhotoViewStateCore1.getItemsAfterIndex(this.$ScrollablePhotoViewStateCore3,this.$ScrollablePhotoViewStateCore1.getEndIndex(this.$ScrollablePhotoViewStateCore3),this.$ScrollablePhotoViewStateCore8,k||h);};j.prototype.destroy=function(){'use strict';this.$ScrollablePhotoViewStateCore9.release();};j.prototype.updateData=function(k){'use strict';if(k.set_id!=this.$ScrollablePhotoViewStateCore3)return;var l=k.query_results&&k.query_results.result_type;if(l=='init'){this.$ScrollablePhotoViewStateCore1.executePostCreate(this.$ScrollablePhotoViewStateCore3,function(){this.syncState();}.bind(this));}else this.syncState();};f.exports=j;}),null);
__d('MSnowflakeStoryViewState',['ScrollablePhotoViewStateCore','MPhotoStore','MPhotoSetStore','MSnowflakeJSConstants','MRequest','MLinkTracking','Stratcom','warning'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q;if(c.__markCompiled)c.__markCompiled();function r(u){return n.listen('m:photostore:afterupdate',null,function(event){u(event.getData());});}function s(u){var v=u.storyIdentifier,w=u.trackingData,x=u.permalink,y={};if(v)y.ei=v;if(x)y.permalink=x;return function(z){var aa=new l(k.INIT_PATH).setData(babelHelpers['extends']({},y,{set:z}));if(w)m.addFeedTrackingDataToRequest(aa,w);return aa.send();};}p=babelHelpers.inherits(t,h);q=p&&p.prototype;function t(u){var v=u.setToken,w=u.storyIdentifier,x=u.permalink,y=u.trackingData,z=u.updateCallback;'use strict';q.constructor.call(this,{photoStore:i,setToken:v,updateCallback:z,subscribeUpdatePhotos:r,fetchInitData:s({storyIdentifier:w,trackingData:y,permalink:x}),initBatchSize:k.VIEWER_INIT_BATCH_SIZE,pageBatchSize:k.VIEWER_PAGE_BATCH_SIZE});this.$MSnowflakeStoryViewState1=false;this.$MSnowflakeStoryViewState2=z;this.$MSnowflakeStoryViewState3=v;}t.prototype.destroy=function(){'use strict';q.destroy.call(this);this.$MSnowflakeStoryViewState1=true;this.$MSnowflakeStoryViewState2=null;};t.prototype.syncState=function(){'use strict';if(this.$MSnowflakeStoryViewState1){o(false,'MSnowflakeStoryViewState.syncState(): Must not call `syncState()` '+'after having called `destroy()` on this instance of '+'`MSnowflakeStoryViewState` with set token `%s`.',this.$MSnowflakeStoryViewState3);return;}j.getBySetToken(this.$MSnowflakeStoryViewState3,function(v){return this.$MSnowflakeStoryViewState2({photoSet:v});}.bind(this));var u=i.getItemsInAvailableRange(this.$MSnowflakeStoryViewState3);this.$MSnowflakeStoryViewState2({media:u,hasNextPage:i.hasNextPage(this.$MSnowflakeStoryViewState3)});};t.syncAllPhotoViewStates=function(){'use strict';var u=j.getLoadedPhotoSetTokens();u.forEach(function(v){n.invoke('m:photostore:afterupdate',null,{set_id:v});});};n.listen('m:snowflakeviewstates:sync',null,function(){return t.syncAllPhotoViewStates();});f.exports=t;}),null);
__d('MSnowflakeViewportTracking',['FBFeedLocations','PhotosLogType','MViewport','MViewportTracking','ReactDOM','Vector','emptyFunction','csx'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';var p,q;if(c.__markCompiled)c.__markCompiled();p=babelHelpers.inherits(r,k);q=p&&p.prototype;r.prototype.getDataFromConfig=function(s){this.isTimeTrackingEnabled=!!s.vpvd_logging;this.$MSnowflakeViewportTracking1=s.snowflakeComponent;this.$MSnowflakeViewportTracking2=s.recordDelay;this.$MSnowflakeViewportTracking3=s.loggingFunction||n;};r.prototype.getFBFeedLocation=function(){return h.PERMALINK;};r.prototype.getAllStories=function(){if(this.$MSnowflakeViewportTracking1.isMounted()){var s=l.findDOMNode(this.$MSnowflakeViewportTracking1).querySelectorAll("._26pa");return s;}return [];};r.prototype.getTimeout=function(){return this.$MSnowflakeViewportTracking2;};r.prototype.getStoryID=function(s){return s.getAttribute('data-index');};r.prototype.getDataToLog=function(s){return {logtype:i.VPV,index:this.getStoryID(s),tracking:{story_height:m.getElementDimensions(s).y,viewport_height:j.getHeight()}};};r.prototype.getMinSizeToBeVisible=function(s){var t=s.querySelector("._1_uo"),u=m.getElementDimensions(t).y;return u*.5;};r.prototype.sendDataToLog=function(s){this.$MSnowflakeViewportTracking3(s);};function r(){p.apply(this,arguments);}f.exports=r;}),null);
__d('MSnowflake.react',['React','ReactDOM','MSnowflakePhotoCard.react','MSnowflakeAlbumHeaderCard.react','MSnowflakeStoryHeaderCard.react','MLoadingSpinner.react','MSnowflakePagerCard.react','MeasuredComponent.react','MXUIDiv.react','MSnowflakeStoryViewState','MRequest','PhotosUserActionTypes','PhotosLogType','MSnowflakePhotoImpressionLogger','MSnowflakeViewportTracking','MSnowflakeSettings','SnowflakeWebDriverIDs','URI','DOM','MLinkTracking','cx','emptyFunction','fbt','getActorFirstName','requestAnimationFrame','FullBleedFeedQE'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){if(c.__markCompiled)c.__markCompiled();var ha=h.PropTypes,ia=h.createClass({displayName:'ReactSnowflake',_isMounted:false,propTypes:{setToken:ha.string.isRequired,storyIdentifier:ha.string,media:ha.object,photoSet:ha.object,referrer:ha.object,isPermalink:ha.bool,scrollTargetIndex:ha.number,scrollToPhoto:ha.string,onPhotoSetDataAvailable:ha.func},getDefaultProps:function ja(){return {onPhotoSetDataAvailable:ca};},getInitialState:function ja(){return {didRequestPhoto:false,didScroll:false,media:this.props.media||[]};},componentDidMount:function ja(){this._isMounted=true;this.viewState=new q({setToken:this.props.setToken,storyIdentifier:this.props.storyIdentifier,trackingData:aa.getFeedTrackingData(i.findDOMNode(this)),permalink:this.props.isPermalink,updateCallback:this._onViewStateChange});fa(function(){if(!this._isMounted)return;this.viewState.initViewState();if(w.VPV_LOGGING_GK){this.viewportTracking=new v();this.viewportTracking.init({loggingFunction:function(ka){return (u.logPhotoViewed({actionType:s.SCROLL,photo:this.state.media[ka.index],logType:ka.logtype,tracking:ka.tracking,referrer:this.props.referrer}));}.bind(this),recordDelay:1000,snowflakeComponent:this,vpvd_logging:w.vpvd_logging});}}.bind(this));this.setupFeedtracking();},setupFeedtracking:function ja(){this.feedtrackingListener=z.listen(i.findDOMNode(this),'touchstart','tag:a',function(ka){var la=ka.getNode('tag:a');if(la)aa.addFeedTrackingDataToHref(la);});},componentWillUnmount:function ja(){this._isMounted=false;this.viewState.destroy();delete this.viewState;if(this.viewportTracking)this.viewportTracking.cleanup();this.feedtrackingListener.remove();},_onViewStateChange:function ja(ka){if(this._isMounted)this.setState(ka);},_requestTargetPhotoData:function ja(){var ka=this.props.scrollTargetIndex;if(ka!=null)this.viewState.fetchToIndex(ka);this.setState({didRequestPhoto:true});},scrollToTargetPhoto:function ja(){var ka=false;if(this.refs.scrollTarget){this.setState({didScroll:true});i.findDOMNode(this.refs.scrollTarget).scrollIntoView(true);ka=true;}if(this.hasOwnProperty('scrollTargetIndex'))u.logPhotoViewed({photo:this.state.media[this.scrollTargetIndex],actionType:s.CLICK,logType:t.NAVIGATION,referrer:this.props.referrer});return ka;},switchCurrentTaggingModeCard:function ja(ka){var la=this.state.currentTaggingModeCard;if(la&&la!==ka)la.deactivateTaggingMode();this.setState({currentTaggingModeCard:ka});},buildTagURI:function ja(ka,la,ma,na){return new y('/a/photos/tag/').addQueryData({photo_fbid:ka,'ids[0]':la,'x[0]':ma,'y[0]':na,is_snowflake:true,sd_source:this.props.source,sd_set:this.props.setToken});},buildDeleteTagURI:function ja(ka){return new y('/a/photo/').addQueryData({fbid:ka,snowflake_tag_remove:true});},sendTagRequest:function ja(ka,la){new r(this.buildTagURI(ka,la.tagUserID,la.x,la.y).toString()).send();},sendDeleteTagRequest:function ja(ka,la){new r(this.buildDeleteTagURI(ka).toString()).setData({rtid:la.tagUserID}).send();},canRenderPhotos:function ja(){return this.state.media.length&&this.state.photoSet;},renderPhotos:function ja(){if(!this.canRenderPhotos())return (h.createElement(p,{padding:'large',textalign:'center'},h.createElement(m,null)));var ka=20;if(ga.fullBleed)ka=0;return this.state.media.map(function(la,ma){var na=this.props.scrollToPhoto===la.id;if(na)this.scrollTargetIndex=ma;return (h.createElement(j,{key:'photo_'+la.id,index:ma,ref:na?'scrollTarget':null,imageSrc:la.image.uri,photoID:la.id,canEdit:la.can_viewer_edit,message:la.message,imageWidth:this.state.viewportWidth-ka,imageHeight:(this.state.viewportWidth-ka)/la.ratio,feedbackData:la.feedback,feedbackTarget:la.id.toString(),canReport:la.can_viewer_report,canCreateTags:la.can_viewer_add_tags,canDeleteTags:la.can_viewer_untag,onActivateTagging:this.switchCurrentTaggingModeCard,typeaheadConfig:this.state.photoSet.taggingTypeaheadConfig,typeaheadSuggestions:this.state.photoSet.taggingTypeaheadSuggestions,initialFaceboxes:la.faceboxes,initialIsUFICollapsed:false,onTagAdd:this.sendTagRequest.bind(this,la.id),onTagDelete:this.sendDeleteTagRequest.bind(this,la.id),initialTags:la.tags,ufi:la.ufi,isPlayable:la.is_playable,playableURL:la.playable_url,playableURLHD:la.playable_url_hd}));}.bind(this));},getTitle:function ja(){if(this.state.photoSet){if(!this.getOwner()&&this.state.photoSet.title)return this.state.photoSet.title;if(this.isAlbum()){return da._("\u00c1lbum de {name}",[da.param('name',this.getOwnerName())]);}else return da._("Publica\u00e7\u00e3o de {name}",[da.param('name',this.getOwnerName())]);}},componentDidUpdate:function ja(ka,la){if(!this.state.didScroll&&this.canRenderPhotos()){var ma=this.scrollToTargetPhoto();if(!ma&&!this.state.didRequestPhoto)this._requestTargetPhotoData();}if(this.state.photoSet!=la.photoSet)this.props.onPhotoSetDataAvailable();},isAlbum:function ja(){return this.state.photoSet&&this.state.photoSet.titleCardStyle==='album';},getOwner:function ja(){if(this.state.photoSet.contributors)return this.state.photoSet.contributors[0];if(this.state.photoSet.story)return this.state.photoSet.story.actors[0];return null;},getOwnerName:function ja(){var ka=this.getOwner()||{name:da._("Desconhecida")},la=ka.structured_name;if(la){return ea(la);}else return ka.name;},isHeaderUFICollapsed:function ja(){return false;},renderHeader:function ja(){if(!this.state.photoSet)return null;var ka=this.state.photoSet.message;if(!ka&&this.state.photoSet.story)ka=this.state.photoSet.story.message;if(this.isAlbum()){var la=this.state.photoSet.story&&this.state.photoSet.story.privacy_scope,ma=this.state.photoSet.feedbackTarget&&this.state.photoSet.feedbackTarget.toString();return (h.createElement(k,{title:this.state.photoSet.title,contributors:this.state.photoSet.contributors,owner:this.state.photoSet.owner,modifiedTime:this.state.photoSet.modifiedTime,mediaCount:this.state.photoSet.mediaCount,message:ka,privacyScope:la,feedback:this.state.photoSet.feedback,feedbackTarget:ma,initialIsUFICollapsed:this.isHeaderUFICollapsed(),ufi:this.state.photoSet.ufi}));}else if(this.state.photoSet.story){var na=this.state.photoSet.story;return (h.createElement(l,{title:na.title,actors:na.actors,isAlbumStory:this.state.photoSet.editURL!=null,editURL:this.state.photoSet.editURL,modifiedTime:this.state.photoSet.modifiedTime,mediaCount:this.state.photoSet.mediaCount,isShareable:!!na.shareable,creationTime:na.creation_time,privacyScope:na.privacy_scope,message:ka,feedback:this.state.photoSet.feedback||na.feedback,feedbackTarget:ma,setToken:this.props.setToken,ufi:this.state.photoSet.ufi,initialIsUFICollapsed:this.isHeaderUFICollapsed()}));}return null;},renderPager:function ja(){if(!this.state.hasNextPage)return null;return (h.createElement(n,{onFetchMore:function(){return this.viewState.fetchMore();}.bind(this)}));},onClientMeasured:function ja(ka){if(this._isMounted)this.setState({viewportWidth:ka.width});},getFeedtrackingOwnerID:function ja(){return this.props.feedtrackingID;},render:function ja(){var ka=['context-layer-root','dialog-ignore-subtree-links','snowflake-root'].join(' ');return (h.createElement(o,{onMeasure:this.onClientMeasured},h.createElement('div',{'data-ownerid':this.getFeedtrackingOwnerID(),'data-sigil':ka,'data-testid':x.ROOT,className:"_4vuj"+(ga.fullBleed?' '+"_gjp":'')},this.renderHeader(),this.renderPhotos(),this.renderPager())));}});f.exports=ia;}),null);
__d('MSnowflakeModalDialog',['React','ReactDOM','MSnowflake.react','MModalDialog','Stratcom','SubscriptionsHandler','ScriptPath'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=null,p=new m();f.exports={bootstrap:function q(r,s){r.onPhotoSetDataAvailable=function(){k.setTitle(o.getTitle());};if(!o){var t=n.getPageInfo()||{};n.set('snowflake','');p.engage();p.addSubscriptions(l.listen('m:modal-dialog:will-close',null,function(){p.release();i.unmountComponentAtNode(i.findDOMNode(o).parentNode);o=null;n.set(t.scriptPath,'',t.extraData);}));}else r.scrollToPhoto=null;o=i.render(h.createElement(j,r),s);}};}),null);
__d('GraphQLQuery',['createObjectFrom'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();k.prototype.addField=function(m){'use strict';if(this.fieldSet){this.fieldSet.fields.push(m);}else this.fieldSet=new l.FieldSet([m]);};k.prototype.addFields=function(m){'use strict';m.forEach(this.addField,this);};function k(){'use strict';}i=babelHelpers.inherits(l,k);j=i&&i.prototype;function l(m,n){'use strict';j.constructor.call(this);this.rootCall=m;this.fieldSet=n;}l.prototype.toString=function(){'use strict';return (this.rootCall||'')+(this.fieldSet||'');};l.Call=function(){function m(n,o){'use strict';this.name=n;this.args=o||[];}m.prototype.toString=function(){'use strict';return this.name+'('+this.args.join(',')+')';};return m;}();l.CallValue=function(){function m(n){'use strict';this.callValue=n;}m.prototype.toString=function(){'use strict';return this.callValue.replace(/[)(}{><,.\\]/g,'\\$&');};return m;}();l.CallVariable=function(){function m(n){'use strict';this.callVariableName=n;}m.prototype.toString=function(){'use strict';return '<'+this.callVariableName+'>';};return m;}();l.Field=function(){var m,n;m=babelHelpers.inherits(o,k);n=m&&m.prototype;function o(p,q,r,s,t,u){'use strict';this.name=s||p;this.fieldName=p;this.calls=q||[];this.fieldSet=r;this.alias=s;this.condition=t;this.exports=u||[];}o.prototype.toString=function(){'use strict';var p='';if(this.condition)p+=this.condition+'?';p+=this.fieldName;if(this.calls.length!==0)p+='.'+this.calls.join('.');if(this.alias)p+=' as '+this.alias;if(this.exports.length!==0){p+=' exports ';p+=this.exports.length===1?this.exports[0]:'('+this.exports.join(',')+')';}if(this.fieldSet)p+=this.fieldSet;return p;};o.prototype.addCall=function(p){'use strict';this.calls.push(p);};o.prototype.removeCalls=function(p){'use strict';var q=h(p),r=[];for(var s=0;s<this.calls.length;s++)if(!q[this.calls[s].name])r.push(this.calls[s]);this.calls=r;};return o;}();l.FieldSet=function(){function m(n){'use strict';this.fields=n||[];}m.prototype.getFields=function(){'use strict';var n=[];for(var o=0;o<this.fields.length;o++)if(this.fields[o] instanceof l.Field)n.push(this.fields[o]);return n;};m.prototype.getFragmentReferences=function(){'use strict';var n=[];for(var o=0;o<this.fields.length;o++)if(this.fields[o] instanceof l.FragmentReference)n.push(this.fields[o]);return n;};m.prototype.toString=function(){'use strict';return '{'+this.fields.join(',')+'}';};return m;}();l.FragmentReference=function(){function m(n,o,p){'use strict';this.name=n;this.is_conditional=o;this.exports=p||[];}m.prototype.toString=function(){'use strict';var n='@'+this.name;if(this.is_conditional)n='?'+n;if(this.exports.length!==0){n+=' exports ';n+=this.exports.length===1?this.exports[0]:'('+this.exports.join(',')+')';}return n;};return m;}();f.exports=l;}),null);
__d('GraphQLParser',['GraphQLQuery'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(m){'use strict';this.queryString=m;this.queryLength=m.length;this.index=-1;this.character=null;this.next();}i.prototype.error=function(m){'use strict';throw new i.SyntaxError(this.queryString,this.index,m);};i.prototype.next=function(m){'use strict';if(m&&m!==this.character)this.error('Expected "'+m+'" instead of "'+this.character+'".');this.index++;if(this.index>this.queryLength){this.error('Expected another character, but at end of string.');}else this.character=this.index===this.queryLength?null:this.queryString[this.index];};i.prototype.end=function(){'use strict';if(this.character)this.error('Expected end of string instead of '+this.character+'.');};i.prototype.whitespace=function(){'use strict';while(this.character===' '||this.character==='\t'||this.character==='\r'||this.character==='\n')this.next();};i.prototype.mandatoryWhitespace=function(){'use strict';var m=this.index;this.whitespace();if(this.index===m)this.error('Expected whitespace, got '+this.character+'.');};i.prototype.keyword=function(m){'use strict';for(var n=0;n<m.length;n++)this.next(m[n]);};i.prototype.query=function(m){'use strict';var n=null;if(m){n=new h.Call(this.name(),this.callArguments());this.whitespace();}var o=null;if(this.character==='{')o=this.fieldSet();return new h(n,o);};i.prototype.name=function(){'use strict';var m=this.index;if(this.character===':')this.error('Name cannot begin with :');while(k(this.character))this.next();if(this.index===m)this.error('Expected name.');return this.queryString.substr(m,this.index-m);};i.prototype.fieldSet=function(){'use strict';var m=[];this.next('{');this.whitespace();m.push(this.field());this.whitespace();while(this.character===','){this.next(',');this.whitespace();m.push(this.field());this.whitespace();}this.next('}');return new h.FieldSet(m);};i.prototype.exports=function(){'use strict';var m;if(this.character==='('){this.next('(');while(true){this.whitespace();m=m||[];m.push(this.name());if(this.character===','){this.next(',');}else break;}this.whitespace();this.next(')');}else m=[this.name()];return m;};i.prototype.field=function(){'use strict';var m;if(this.character==='@'||this.character==='?'){var n=false;if(this.character==='?'){this.next('?');n=true;}this.next('@');var o=this.name();this.whitespace();if(this.character==='e'){this.keyword('exports');this.mandatoryWhitespace();m=this.exports();}return new h.FragmentReference(o,n,m);}var p,q,r=this.name();this.whitespace();if(this.character==='?'){this.next('?');this.whitespace();p=this.name();q=r;}else p=r;this.whitespace();var s=this.calls(),t;if(this.character==='a'){this.next('a');this.next('s');this.whitespace();t=this.name();this.whitespace();}if(this.character==='e'){this.keyword('exports');this.mandatoryWhitespace();m=[this.name()];this.whitespace();}this.whitespace();var u;if(this.character==='{')u=this.fieldSet();return new h.Field(p,s,u,t,q,m);};i.prototype.calls=function(){'use strict';var m=[];while(this.character==='.'){this.next('.');this.whitespace();m.push(new h.Call(this.name(),this.callArguments()));this.whitespace();}return m;};i.prototype.callArguments=function(){'use strict';this.next('(');this.whitespace();var m=[];if(this.character!==')'){m.push(this.callArgument());while(this.character===','){this.next(',');this.whitespace();m.push(this.callArgument());}}this.next(')');return m;};i.prototype.callArgument=function(){'use strict';return this.character==='<'?this.callVariable():this.callValue();};i.prototype.callVariable=function(){'use strict';this.next('<');var m=this.name();this.next('>');return new h.CallVariable(m);};i.prototype.callValue=function(){'use strict';var m=this.index,n=false;while(l(this.character)){if(this.character==='\\'){this.next();n=true;}this.next();}if(this.index===m)this.error('Expected call value.');var o=this.index-m,p=this.queryString.substr(m,o);p=p.replace(/\s+$/,'');if(n)for(var q=0;q<o;++q)if(p[q]==='\\'){p=p.substr(0,q)+p.substr(q+1);--o;}return new h.CallValue(p);};i.SyntaxError=function(){var m,n;m=babelHelpers.inherits(o,Error);n=m&&m.prototype;function o(p,q,r){'use strict';this.queryString=p;this.character=q;this.parserError=r;this.message='Syntax error "'+r+'" '+'at character '+q+' '+'near "'+j(p,q)+'" '+'in query: '+p;}return o;}();function j(m,n){return (m.substr(0,n+1).replace(/\s+/g,' ').substr(-10)+'\u20DD'+m.substr(n+1).replace(/\s+/g,' ').substr(0,10));}function k(m){if(m===null)return false;return m==='_'||m===':'||m==='-'||m>='0'&&m<='9'||m>='A'&&m<='Z'||m>='a'&&m<='z';}function l(m){if(m===null)return false;return m!='('&&m!=')'&&m!='{'&&m!='}'&&m!='<'&&m!='>'&&m!='.'&&m!=',';}i.parseQuery=function(m){var n=new i(m);n.whitespace();var o=n.query(true);n.whitespace();n.end();return o;};i.parseRootlessQuery=function(m){var n=new i(m);n.whitespace();var o=n.query(false);n.whitespace();n.end();return o;};f.exports=i;}),null);
__d("PagedQuery",["GraphQLParser","GraphQLQuery","keyOf","isEmpty"],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m,n){"use strict";this.$PagedQuery1=m;this.$PagedQuery2=n;}l.prototype.$PagedQuery3=function(){"use strict";var m=this.findFieldByPath(this.$PagedQuery1);m.removeCalls(['find','after','before','first','last']);return m;};l.prototype.$PagedQuery4=function(m,n,o){"use strict";var p=this.$PagedQuery3(),q=o?'after':'before';p.addCall(new i.Call(q,[m]));var r=o?'first':'last';p.addCall(new i.Call(r,[n]));return this.$PagedQuery1.toString();};l.prototype.$PagedQuery5=function(m){"use strict";var n=this.$PagedQuery2[m];if(typeof n=='object'&&!k(n))return j(n);return null;};l.prototype.$PagedQuery6=function(m){"use strict";var n=this.$PagedQuery5(m);if(n)return n;return this.$PagedQuery2[m];};l.prototype.$PagedQuery7=function(m){"use strict";var n=this.$PagedQuery5(m);if(n)return this.$PagedQuery2[m][n];return this.$PagedQuery2[m];};l.prototype.pageAfterQueryString=function(m,n){"use strict";return this.$PagedQuery4(m,n,true);};l.prototype.pageBeforeQueryString=function(m,n){"use strict";return this.$PagedQuery4(m,n,false);};l.prototype.pageFirstQueryString=function(m){"use strict";var n=this.$PagedQuery3();n.addCall(new i.Call('first',[m]));return this.$PagedQuery1.toString();};l.prototype.pageLastQueryString=function(m){"use strict";var n=this.$PagedQuery3();n.addCall(new i.Call('last',[m]));return this.$PagedQuery1.toString();};l.prototype.findFieldByPath=function(m){"use strict";var n=m,o=this.$PagedQuery6(0);if(m.rootCall.name!=o)throw new Error("Query path does not match root query at top node, "+"expected "+o+", "+"found "+m.name+" instead.");for(var p=1;p<this.$PagedQuery2.length;p++){var q=n.fieldSet.fields,r=false,s=this.$PagedQuery6(p);for(var t=0;t<q.length;t++)if(q[t].fieldName==s){n=q[t];r=true;break;}if(!r)throw new Error("Query path does not match query structure at location "+p+", "+"expected "+s+", "+"not located in "+q);}return n;};l.prototype.findDataByPath=function(m){"use strict";var n=m;for(var o=0;o<this.$PagedQuery2.length;o++){var p=this.$PagedQuery7(o);if(!n||!n[p])throw new Error("Query path does not match payload at location "+o+", "+"expected "+p);n=n[p];}return n;};l.constructFromPath=function(m,n){return new l(h.parseQuery(m),n);};f.exports=l;}),null);
__d("PagedQueryCache",["KeyedCallbackManager","GraphQLParser","emptyFunction"],(function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m,n,o){"use strict";l=l.bind(this);this.$PagedQueryCache1=this.$PagedQueryCache1.bind(this,l),this.$PagedQueryCache2=m;this.$PagedQueryCache3=babelHelpers["extends"]({enableLooping:false},o);var p=this.$PagedQueryCache2.findDataByPath(n),q=p.edges;this.$PagedQueryCache4=p.page_info;this.$PagedQueryCache5=new h();this.$PagedQueryCache6={};this.$PagedQueryCache7={};this.$PagedQueryCache8={};this.$PagedQueryCache9=0;this.$PagedQueryCache10=0;this.$PagedQueryCache11={};this.$PagedQueryCache12(q,0);if(this.$PagedQueryCache3.allDataLoaded)this.$PagedQueryCache13();}k.prototype.$PagedQueryCache1=function(l,m,n,o,p,q,r){"use strict";var s=i.parseQuery(m),t=n.findFieldByPath(s),u={};for(var v=0;v<t.calls.length;v++){var w=t.calls[v];if(w.args.length>0)u[w.name]=w.args[0].callValue;}Object.assign(u,q);l(m,n,o,p,u,r);};k.prototype.$PagedQueryCache12=function(l,m){"use strict";var n={},o=false;for(var p=0;p<l.length;p++){if(this.hasLooped())break;var q=m+p,r=l[p].cursor,s=l[p].node,t=this.$PagedQueryCache6[r];if(this.$PagedQueryCache3.enableLooping&&t!==undefined){o=true;continue;}var u=this.$PagedQueryCache5.getResource(q);if(u!==undefined&&u!=r)throw new Error('Attempting to add cursor '+r+' at location '+q+' which already contains cursor '+u);this.$PagedQueryCache8[s.id]=r;this.$PagedQueryCache7[r]=s;n[q]=r;this.$PagedQueryCache6[r]=q;this.$PagedQueryCache9=Math.min(q,this.$PagedQueryCache9);this.$PagedQueryCache10=Math.max(q,this.$PagedQueryCache10);}if(o)this.$PagedQueryCache13();this.$PagedQueryCache5.addResourcesAndExecute(n);};k.prototype.getItemsAfterCursor=function(l,m,n){"use strict";this.$PagedQueryCache14(l,m,true,n);};k.prototype.getItemsBeforeCursor=function(l,m,n){"use strict";this.$PagedQueryCache14(l,m,false,n);};k.prototype.$PagedQueryCache15=function(l){"use strict";if(!this.hasLooped())return l;var m=this.$PagedQueryCache16.end-this.$PagedQueryCache16.start+1;while(l<this.$PagedQueryCache16.start||l>this.$PagedQueryCache16.end)if(l<this.$PagedQueryCache16.start){l+=m;}else l-=m;return l;};k.prototype.$PagedQueryCache14=function(l,m,n,o){"use strict";var p=this.$PagedQueryCache17(l);if(!n)p=p-m-1;var q=[];for(var r=1;r<=m;r++)q.push(this.$PagedQueryCache15(p+r));var s=this.$PagedQueryCache5.getUnavailableResourcesFromRequest(q);if(s.length){s=this.$PagedQueryCache18(s);if(!s.length)return;var t;if(n){if(this.$PagedQueryCache3.enableLooping&&!this.hasNextPage(l)){t=this.$PagedQueryCache2.pageFirstQueryString(m);}else t=this.$PagedQueryCache2.pageAfterQueryString(l,m);}else if(this.$PagedQueryCache3.enableLooping&&!this.hasPreviousPage(l)){t=this.$PagedQueryCache2.pageLastQueryString(m);}else t=this.$PagedQueryCache2.pageBeforeQueryString(l,m);for(var u=0;u<s.length;++u)this.$PagedQueryCache11[s[u]]=true;this.$PagedQueryCache19&&this.$PagedQueryCache19();this.$PagedQueryCache1(t,this.$PagedQueryCache2,s,n?this.$PagedQueryCache3.first_query:this.$PagedQueryCache3.last_query,this.$PagedQueryCache3.persistent_params,this.$PagedQueryCache20.bind(this));}var v=function(w){var x=[];for(var y=0;y<m;y++)x.push(this.$PagedQueryCache7[w[q[y]]]);return x;}.bind(this);this.$PagedQueryCache5.executeOrEnqueue(q,function(w){o(v(w));});};k.prototype.$PagedQueryCache20=function(){"use strict";this.$PagedQueryCache21.apply(this,arguments);};k.prototype.$PagedQueryCache17=function(l){"use strict";var m=this.$PagedQueryCache6[l];if(m===undefined)throw new Error("Cursor not found: the request can still be made but the result "+"would not link to the existing data");return m;};k.prototype.setPayloadCallback=function(l){"use strict";this.$PagedQueryCache21=l;};k.prototype.updateData=function(l){"use strict";var m=this.$PagedQueryCache2.findDataByPath(l.query_results),n=m&&m.edges;if(!n)return;for(var o=0;o<n.length;++o){var p=n[o].cursor,q=n[o].node;if(this.$PagedQueryCache7[p]===undefined)this.$PagedQueryCache7[p]={};for(var r in q)this.$PagedQueryCache7[p][r]=q[r];}};k.prototype.addData=function(l){"use strict";var m=false,n=null,o=0;for(var p in l.query_params){if(p=='after'||p=='before')n=l.query_params[p];if(p=='first'||p=='last'){m=p=='first';o=l.query_params[p];}}if(this.$PagedQueryCache3.enableLooping&&!n)n=m?this.$PagedQueryCache4.end_cursor:this.$PagedQueryCache4.start_cursor;if(!n||this.$PagedQueryCache6[n]===undefined)return;var q=this.$PagedQueryCache6[n],r=this.$PagedQueryCache2.findDataByPath(l.query_results);if(!r.edges.length){this.$PagedQueryCache22(l.requested_indices);if(m){this.$PagedQueryCache4.has_next_page=false;this.$PagedQueryCache3.enableLooping&&this.getItemsAfterCursor(n,o,j);}else{this.$PagedQueryCache4.has_previous_page=false;this.$PagedQueryCache3.enableLooping&&this.getItemsBeforeCursor(n,o,j);}return;}var s;if(m){s=q+1;this.$PagedQueryCache4.end_cursor=r.page_info.end_cursor;this.$PagedQueryCache4.has_next_page=r.page_info.has_next_page;}else{s=q-r.edges.length;this.$PagedQueryCache4.start_cursor=r.page_info.start_cursor;this.$PagedQueryCache4.has_previous_page=r.page_info.has_previous_page;}this.$PagedQueryCache12(r.edges,s);this.$PagedQueryCache22(l.requested_indices);};k.prototype.hasNextPage=function(l){"use strict";var m=this.$PagedQueryCache17(l);if(this.$PagedQueryCache5.getResource(m+1)){return true;}else if(l==this.$PagedQueryCache4.end_cursor){return this.$PagedQueryCache4.has_next_page;}else throw new Error('hasNextPage called on unknown cursor');};k.prototype.hasPreviousPage=function(l){"use strict";var m=this.$PagedQueryCache17(l);if(this.$PagedQueryCache5.getResource(m-1)){return true;}else if(l==this.$PagedQueryCache4.start_cursor){return this.$PagedQueryCache4.has_previous_page;}else throw new Error('hasPreviousPage called on unknown cursor');};k.prototype.hasLooped=function(){"use strict";return this.$PagedQueryCache3.enableLooping&&this.$PagedQueryCache16;};k.prototype.getItemAtIndex=function(l,m){"use strict";l=this.$PagedQueryCache15(l);this.$PagedQueryCache5.executeOrEnqueue([l],function(n){m(this.$PagedQueryCache7[n[l]]);}.bind(this));};k.prototype.getItemAtIndexImmediate=function(l){"use strict";l=this.$PagedQueryCache15(l);var m=this.$PagedQueryCache5.getResource(l),n;if(m)n=this.$PagedQueryCache7[m];return n;};k.prototype.getAvailableRange=function(){"use strict";var l=this.$PagedQueryCache17(this.$PagedQueryCache4.start_cursor),m=this.$PagedQueryCache17(this.$PagedQueryCache4.end_cursor);return {offset:l,length:m-l+1};};k.prototype.getCursorForID=function(l){"use strict";return this.$PagedQueryCache8[l];};k.prototype.getIndexForID=function(l){"use strict";var m=this.getCursorForID(l);return m!==undefined?this.$PagedQueryCache6[m]:undefined;};k.prototype.$PagedQueryCache22=function(l){"use strict";if(l)for(var m=0;m<l.length;++m)delete this.$PagedQueryCache11[l[m]];};k.prototype.$PagedQueryCache18=function(l){"use strict";if(!this.$PagedQueryCache11)return l;var m=[];for(var n=0;n<l.length;++n)if(!this.$PagedQueryCache11[l[n]])m.push(l[n]);return m;};k.prototype.$PagedQueryCache13=function(){"use strict";this.$PagedQueryCache16={start:this.$PagedQueryCache9,end:this.$PagedQueryCache10};};k.prototype.setPreFetchCallback=function(l){"use strict";this.$PagedQueryCache19=l;};f.exports=k;}),null);
__d('PhotoStorePagedQueryCacheCore',['PagedQuery','PagedQueryCache'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,i);k=j&&j.prototype;function l(m,n){'use strict';var o=m.query_results,p=m.query_metadata,q=h.constructFromPath(p.query_string,p.query_path);k.constructor.call(this,n,q,o,babelHelpers['extends']({enableLooping:true},p.config));this.$PhotoStorePagedQueryCacheCore1=m.set_id;this.$PhotoStorePagedQueryCacheCore2=m.payloadsource;this.setPayloadCallback(this.$PhotoStorePagedQueryCacheCore3.bind(this));}l.prototype.$PhotoStorePagedQueryCacheCore3=function(m){'use strict';m.set_id=this.$PhotoStorePagedQueryCacheCore1;this.broadcastUpdate(this.$PhotoStorePagedQueryCacheCore2,m);};l.prototype.broadcastUpdate=function(m,n){'use strict';};f.exports=l;}),null);
__d('replaceJSMarkupMarkers',['HTML'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k){return k&&typeof k=='object';}function j(k){if(!i(k))return k;loop:for(var l in k){if(i(k[l])&&k[l].hasOwnProperty('markup')){var m=k[l].markup;if(i(m)&&m.hasOwnProperty('__html')){k[l]=h.replaceJSONWrapper(m).getRootNode();continue loop;}}k[l]=j(k[l]);};return k;}f.exports=j;}),null);
__d('MSnowflakePagedQueryCache',['MPhotoCentralUpdates','MSnowflakeJSConstants','MRequest','PhotoStorePagedQueryCacheCore','replaceJSMarkupMarkers'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();function o(q,r,s,t,u,v,w,x){var y=new j(i.PAGE_PATH).setData({set:q,first:w.first,after:w.after,_ft_:s});y.listen('done',function(z){var aa=l(z.payload);x({requested_indices:u,query_results:aa.output,query_metadata:{query_string:aa.query},query_params:w});});y.send();}m=babelHelpers.inherits(p,k);n=m&&m.prototype;function p(q){'use strict';n.constructor.call(this,q,o.bind(null,q.set_id,q.tracking_data));}p.prototype.broadcastUpdate=function(q,r){'use strict';h.handleUpdate(q,r);};f.exports=p;}),null);