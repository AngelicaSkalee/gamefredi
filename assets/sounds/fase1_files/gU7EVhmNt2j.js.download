if (self.CavalryLogger) { CavalryLogger.start_js(["8GQ1Z"]); }

__d("XInlineComposerAudienceEducationController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/audience_education\/",{new_post_param:{type:"String"}});}),null);
__d('MComposerAudienceEducations',['MLegacyDataStore','DOM','MRequest','SubscriptionsHandler','Stratcom','XInlineComposerAudienceEducationController'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={init:function o(p,q,r){this._privacySelector=q;this._flyout=p;this._inHoldout=r;this._alreadyInitialized=false;this._listeners=new k();this._listeners.addSubscriptions(l.listen('click','mbasic_inline_feed_composer',function(s){s.kill();if(!this._alreadyInitialized){this._alreadyInitialized=true;l.invoke('MComposerAudienceEducations::composerClicked');if(this._inHoldout)this._closeEducation();}}.bind(this)),l.listen('m:page:unload',null,function(){this._listeners.release();}.bind(this)),l.listen('MGenericJewel::clicked',null,function(){if(this._alreadyInitialized)this._closeEducation();}.bind(this)),l.listen('MComposerAudienceEducations::showSelector',null,function(s){if(this._privacySelector){var t=s.getData().mainView;i.replace(t,this._privacySelector);this._addListenerToSelector();}}.bind(this)),l.listen('MComposerAudienceEducations::updatePrivacy',null,function(s){var t=s.getData().value;this._closeEducation(t.toString());}.bind(this)),l.listen('MComposerAudienceEducations::closeEducation',null,function(s){this._closeEducation();}.bind(this)),p.addListener('hide',function(event){this._closeEducation();}.bind(this)));},_closeEducation:function o(p){this._listeners.release();this._updateComposerWithPrivacy(p);this._flyout.destroy();},_addListenerToSelector:function o(){if(!this._privacySelector)return;this._listeners.addSubscriptions(i.listen(this._privacySelector,'click','privacy-option',function(event){var p=event.getNode('privacy-option'),q=h.get(p,'value').value;this._closeEducation(q.toString());i.hide(this._privacySelector);}.bind(this)));},_updateComposerWithPrivacy:function o(p){var q=m.getURIBuilder().setString('new_post_param',p).getURI(),r=new j(q);r.send();l.invoke('MComposerAudienceEducations::audienceUpdated');}};f.exports=n;}),null);
__d("XPrivacyAudienceAlignmentLoggingController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/audience_alignment\/log\/",{client_time:{type:"Int"},event:{type:"Enum",required:true,enumType:1},product:{type:"Enum",required:true,enumType:1},shown_duration:{type:"Float"},value:{type:"Int"},source:{type:"Enum",enumType:1}});}),null);
__d('MPrivacyAudienceAlignmentTux',['AudienceAlignmentConst','DOM','MComposerAudienceEducationConsts','MAjaxify','MPrivacyComposerSelector','MJSEnvironment','MRequest','MViewport','PrivacyConst','Stratcom','SubscriptionsHandler','XPrivacyAudienceAlignmentLoggingController','Vector'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();function u(v,w,x,y,z,aa,ba,ca){'use strict';this.$MPrivacyAudienceAlignmentTux1=v;this.$MPrivacyAudienceAlignmentTux2=w;this.$MPrivacyAudienceAlignmentTux3=x;this.$MPrivacyAudienceAlignmentTux4=y;this.$MPrivacyAudienceAlignmentTux5=z;this.$MPrivacyAudienceAlignmentTux6=aa;this.$MPrivacyAudienceAlignmentTux7=ba;this.$MPrivacyAudienceAlignmentTux8=ca;this.$MPrivacyAudienceAlignmentTux9=new r();this.$MPrivacyAudienceAlignmentTux9.addSubscriptions(q.listen('click','aaa_dismiss',function(da){this.$MPrivacyAudienceAlignmentTux10(h.event.DISMISSAL);if(this.$MPrivacyAudienceAlignmentTux11()){q.invoke('MComposerAudienceEducations::closeEducation');this.$MPrivacyAudienceAlignmentTux12();return;}var ea=this.$MPrivacyAudienceAlignmentTux6[0];this.$MPrivacyAudienceAlignmentTux13(ea);}.bind(this)),q.listen('click','aaa_learn_back',function(da){o.scrollTo(0,0);i.replace(this.$MPrivacyAudienceAlignmentTux2,this.$MPrivacyAudienceAlignmentTux1);}.bind(this)),q.listen('click','aaa_learn',function(da){o.scrollTo(0,0);i.replace(this.$MPrivacyAudienceAlignmentTux1,this.$MPrivacyAudienceAlignmentTux2);this.$MPrivacyAudienceAlignmentTux10(h.event.LEARN_MORE);}.bind(this)),q.listen('click','aaa_more',function(da){this.$MPrivacyAudienceAlignmentTux10(h.event.INTRODUCED_TO_AUDIENCE_SELECTOR);if(this.$MPrivacyAudienceAlignmentTux11()){q.invoke('MComposerAudienceEducations::showSelector',null,{mainView:this.$MPrivacyAudienceAlignmentTux1});}else{var ea=this.$MPrivacyAudienceAlignmentTux14&&l.getInstance(this.$MPrivacyAudienceAlignmentTux14);ea&&ea.showMenu();var fa=this.$MPrivacyAudienceAlignmentTux6[1];this.$MPrivacyAudienceAlignmentTux13(fa);}}.bind(this)),q.listen('click','aaa_friends',function(da){this.$MPrivacyAudienceAlignmentTux10(h.event.FRIENDS_OPT_IN);if(this.$MPrivacyAudienceAlignmentTux11()){q.invoke('MComposerAudienceEducations::updatePrivacy',null,{value:p.PostParam.FRIENDS.toString()});}else{q.invoke('MPrivacyAudienceAlignment:friends',null);var ea=this.$MPrivacyAudienceAlignmentTux6[2];this.$MPrivacyAudienceAlignmentTux13(ea);}}.bind(this)),q.listen('click','aaa_public',function(da){this.$MPrivacyAudienceAlignmentTux10(h.event.PUBLIC_OPT_IN);if(this.$MPrivacyAudienceAlignmentTux11()){q.invoke('MComposerAudienceEducations::updatePrivacy',null,{value:p.PostParam.EVERYONE.toString()});}else{var ea=this.$MPrivacyAudienceAlignmentTux6[3];this.$MPrivacyAudienceAlignmentTux13(ea);}}.bind(this)),q.listen('click','aaa_onlyme',function(da){this.$MPrivacyAudienceAlignmentTux10(h.event.ONLY_ME_OPT_IN);if(this.$MPrivacyAudienceAlignmentTux11()){q.invoke('MComposerAudienceEducations::updatePrivacy',null,{value:p.PostParam.ONLY_ME.toString()});}else{var ea=this.$MPrivacyAudienceAlignmentTux6[3];this.$MPrivacyAudienceAlignmentTux13(ea);}}.bind(this)),q.listen('MComposerAudienceEducations::audienceUpdated',null,function(){this.$MPrivacyAudienceAlignmentTux12();}.bind(this)),q.listen('MComposerAudienceEducations::composerClicked',null,function(da){var event=this.$MPrivacyAudienceAlignmentTux3?h.event.HOLDOUT:h.event.EXPOSURE;this.$MPrivacyAudienceAlignmentTux10(event);}.bind(this)));}u.prototype.registerComposer=function(v){'use strict';this.$MPrivacyAudienceAlignmentTux15=v;};u.prototype.registerPrivacySelector=function(v){'use strict';this.$MPrivacyAudienceAlignmentTux14=v;};u.prototype.show=function(){'use strict';if(this.$MPrivacyAudienceAlignmentTux3){this.$MPrivacyAudienceAlignmentTux10(h.event.HOLDOUT);return;}if(this.$MPrivacyAudienceAlignmentTux15&&this.$MPrivacyAudienceAlignmentTux1){this.$MPrivacyAudienceAlignmentTux15.parentNode.appendChild(this.$MPrivacyAudienceAlignmentTux1);i.hide(this.$MPrivacyAudienceAlignmentTux15);this.$MPrivacyAudienceAlignmentTux10(h.event.EXPOSURE);this.$MPrivacyAudienceAlignmentTux16();}};u.prototype.$MPrivacyAudienceAlignmentTux11=function(){'use strict';return this.$MPrivacyAudienceAlignmentTux5==h.source.MTOUCH_INLINE_COMPOSER;};u.prototype.$MPrivacyAudienceAlignmentTux16=function(){'use strict';if(m.IS_APPLE_WEBKIT_IOS)return;var v=i.scry(document.body,'div','m-layer-root')[0],w=i.scry(document.body,'a','aaa_more')[0];if(!w||!v)return;var x=o.getScreenHeight(),y=t.getElementPosition(w).y+w.offsetHeight;if(y>x)i.hide(i.scry(v,'div','tux-body')[0]);};u.prototype.$MPrivacyAudienceAlignmentTux12=function(){'use strict';i.hide(this.$MPrivacyAudienceAlignmentTux1);this.$MPrivacyAudienceAlignmentTux9.release();};u.prototype.$MPrivacyAudienceAlignmentTux13=function(v){'use strict';this.$MPrivacyAudienceAlignmentTux12();i.show(this.$MPrivacyAudienceAlignmentTux15);var w=i.scry(this.$MPrivacyAudienceAlignmentTux15,'div','privacy-button-icon')[0];if(!w)return;var x=i.find(this.$MPrivacyAudienceAlignmentTux7.getRoot(),'div','aaa_tooltip_text');i.setContent(x,v);this.$MPrivacyAudienceAlignmentTux7.setContext(w);this.$MPrivacyAudienceAlignmentTux7.show();};u.prototype.$MPrivacyAudienceAlignmentTux10=function(v){'use strict';var w=s.getURIBuilder().setEnum('product',this.$MPrivacyAudienceAlignmentTux4).setEnum('source',this.$MPrivacyAudienceAlignmentTux5).setEnum('event',v).setInt('client_time',Date.now()).getURI();k.ajaxify(null,null,new n(w));};u.prototype.deviceTooShort=function(){'use strict';this.$MPrivacyAudienceAlignmentTux10(h.event.DEVICE_TOO_SHORT);};f.exports=u;}),null);
__d("XStickyGuardrailLoggingController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/sticky_guard\/log\/",{client_time:{type:"Int",required:true},event:{type:"Enum",required:true,enumType:1},from_privacy:{type:"String"},product:{type:"Enum",required:true,enumType:1},suggestion:{type:"String",required:true},suggestion_id:{type:"Int",required:true},is_only_me_guardrail:{type:"Bool",defaultValue:false},num_times_seen:{type:"Int"},source:{type:"Enum",enumType:1},local_hour_time:{type:"Int"},features:{type:"String"},is_from_react:{type:"Int"},run_mode:{type:"Enum",enumType:0}});}),null);
__d('MPrivacyStickyGuardrail',['MLegacyDataStore','DOM','MRequest','Stratcom','Style','SubscriptionsHandler','StickyGuardrailConsts','XStickyGuardrailLoggingController'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=null,q=null,r=null,s=null,t=null,u=null,v=null,w,x=null,y=null;function z(){var ha=i.scry(document,'div','privacy-button-icon')[0];if(!ha){ca(n.event.CLIENT_ERROR,r,q);return;}da();p.setContext(ha);p.show();ca(n.event.CLIENT_SEEN,r,q);}function aa(){w=p.addListener('hide',function(){k.invoke('MComposerAudienceEducations::closeEducation');fa();ca(n.event.DISMISSED,r,q);});u.addSubscriptions(k.listen('click','sticky_guardrail_cancel_button',function(){fa();k.invoke('MComposerAudienceEducations::closeEducation');ca(n.event.DECLINED,r,q);}.bind(this)),k.listen('click','sticky_guardrail_change_button',function(event){ca(n.event.CONVERTED,r,q);ba(q,v);}.bind(this)),k.listen('click','sticky_guardrail_close_button',function(event){fa();k.invoke('MComposerAudienceEducations::closeEducation');ca(n.event.CLOSED,r,q);}.bind(this)),k.listen('MComposerAudienceEducations::audienceUpdated',null,function(ha){fa();}.bind(this)),k.listen('MComposerAudienceEducations::composerClicked',null,function(ha){ca(n.event.CLIENT_SEEN,r,q);}));}function ba(ha,ia){if(ia==n.source.MTOUCH_STRUCTURED_COMPOSER){fa();var ja=i.find(document,'table','privacy-table');for(var ka=0;ka<ja.rows.length;ka++){var la=ja.rows[ka],ma=h.get(la);if(ma.value==ha){k.invoke('MPrivacyComposerMenu:updatePrivacy',null,{row:la});return;}}}else if(ia==n.source.MTOUCH_INLINE_COMPOSER)k.invoke('MComposerAudienceEducations::updatePrivacy',null,{value:ha.toString()});}function ca(ha,ia,ja){var ka=o.getURIBuilder().setEnum('event',ha).setInt('client_time',Date.now()).setEnum('product',n.product.MTOUCH_COMPOSER).setEnum('source',v).setString('suggestion',ja.toString()).setString('from_privacy',ia.toString()).setInt('suggestion_id',s).setInt('local_hour_time',new Date().getHours()).setString('features',x).setEnum('run_mode',y).getURI(),la=new j(ka);la.send();}function da(){l.set(t,'margin-bottom','80px');}function ea(){l.set(t,'margin-bottom','0');}function fa(){if(t){ea();t.focus();}w.remove();p.hide();u.release();}var ga={initComposerFlyout:function ha(ia,ja,ka,la,ma,na,oa){p=ia;q=ja;s=ka;r=la;v=ma;x=na;y=oa;u=new m();aa();k.listen('show_sticky_guardrail_flyout',null,function(pa){t=pa.getData().textarea;if(!t){ca(n.event.CLIENT_ERROR,r,q);return;}t.blur();z();}.bind(this));}};f.exports=ga;}),null);