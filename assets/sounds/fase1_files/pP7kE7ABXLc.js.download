if (self.CavalryLogger) { CavalryLogger.start_js(["pmGag"]); }

__d("MComposerWaterfallEvent",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={COMPOSER_CANCEL:"composer_cancel",COMPOSER_CANCEL_INTENT:"intent_composer_cancel",COMPOSER_ENTRY:"composer_entry",COMPOSER_NOT_RENDERED:"composer_not_renderer",COMPOSER_POST:"composer_post",COMPOSER_POST_CANCEL:"composer_post_cancel",COMPOSER_POST_FAILURE:"composer_post_failure",COMPOSER_POST_FAILURE_FATAL:"composer_post_fatal_failure",COMPOSER_POST_FAILURE_GIVEUP:"composer_post_giveup_failure",COMPOSER_POST_SUCCESS:"composer_post_success",COMPOSER_POST_COMPLETED:"composer_post_completed",COMPOSER_WRITTEN:"composer_written",ALBUM_ADD:"add_album",ALBUM_CANCEL:"cancel_album",ALBUM_INTENT:"intent_album",ALBUM_REMOVE:"remove_album",FRIEND_TAG_ADD:"add_friend_tag",FRIEND_TAG_CANCEL:"cancel_friend_tag",FRIEND_TAG_INTENT:"intent_friend_tag",FRIEND_TAG_REMOVE:"remove_friend_tag",FRIEND_TAG_SEARCH:"search_friend_tag",FRIEND_SHOW_MORE:"show_more_friend_tag",LOCATION_ADD:"add_location",LOCATION_CANCEL:"cancel_location",LOCATION_INTENT:"intent_location",LOCATION_REMOVE:"remove_location",LOCATION_SCROLL:"scroll_location",LOCATION_SEARCH:"search_location",MINUTIAE_ADD:"add_minutiae",MINUTIAE_CANCEL:"cancel_minutiae",MINUTIAE_CHANGE_ICON:"change_icon_minutiae",MINUTIAE_CHANGE_ICON_CANCEL:"change_icon_cancel_minutiae",MINUTIAE_CHANGE_ICON_INTENT:"change_icon_intent_minutiae",MINUTIAE_CHANGE_ICON_SEARCH:"change_icon_search_minutiae",MINUTIAE_INTENT:"intent_minutiae",MINUTIAE_REMOVE:"remove_minutiae",MINUTIAE_SCROLL:"scroll_minutiae",MINUTIAE_SEARCH:"search_minutiae",MINUTIAE_TYPE_CLICK:"type_click_minutiae",MINUTIAE_SEE_MORE:"see_more_minutiae",MINUTIAE_CHAIN_SKIP:"skip_chain_minutiae",MINUTIAE_CHAIN_SUGGEST:"suggest_chain_minutiae",MINUTIAE_ICONPICKER_QUERY:"minutiae_iconpicker_query",MINUTIAE_ICONPICKER_BOOTSTRAP:"minutiae_iconpicker_bootstrap",MINUTIAE_ICONPICKER_SELECT:"minutiae_iconpicker_select",MARKDOWN_INTENT:"markdown_intent",MEDIA_INTENT:"intent_media",MEDIA_CANCEL:"cancel_media",PHOTO_ADD:"add_photo",PHOTO_ADD_FAILURE:"add_photo_failure",PHOTO_ADD_SUCCESS:"add_photo_success",PHOTO_REMOVE:"remove_photo",PRIVACY_ADD:"add_privacy",PRIVACY_CANCEL:"cancel_privacy",PRIVACY_INTENT:"intent_privacy",PRIVACY_SCROLL:"scroll_privacy",PRIVACY_SEE_ALL_LISTS:"see_all_lists_privacy",SELECT_FRIEND_TIMELINE_INTENT:"intent_select_friend_timeline",SELECT_FRIEND_TIMELINE_ADD:"add_select_friend_timeline",SELECT_FRIEND_TIMELINE_CANCEL:"cancel_select_friend_timeline",SERVER_POST_BEGIN:"server_composer_post_begin",SERVER_POST_FAILURE:"server_composer_post_failure",SERVER_POST_SUCCESS:"server_composer_post_succeeded",POST_POST_WITH_TAG_BEGIN:"post_post_with_tag_begin",POST_POST_WITH_TAG_FAILURE:"post_post_with_tag_failure",POST_POST_WITH_TAG_SUCCESS:"post_post_with_tag_success",TARGET_SELECTOR_INTENT:"intent_target_selector",TARGET_SELECTOR_CANCEL:"cancel_target_selector",VIDEO_ADD:"add_video",VIDEO_ADD_FAILURE:"add_video_failure",VIDEO_ADD_SUCCESS:"add_video_success",VIDEO_REMOVE:"remove_video",FEATURE_INTENT:"composer_feature_intent",FEATURE_UPDATE:"composer_feature_update",FEATURE_DONE:"composer_feature_done"};}),null);
__d("MCompositionStatusFields",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={TEXT:"TEXT",LONGEST_LENGTH:"LONGEST_LENGTH"};}),null);
__d('MLoadingSpinner.react',['MLoadingIndicator.react','React'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,i.Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';return (i.createElement('div',{className:this.props.className},i.createElement(h,{background:'light',size:'large'})));};function l(){'use strict';j.apply(this,arguments);}f.exports=l;}),null);
__d('MTokenCollection.react',['React'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes;i=babelHelpers.inherits(l,h.Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m=this.props.renderer,n=this.props.collection.entries.map(function(o,p){var q=null;return (h.createElement(m,{collectionKey:this.props.collectionKey,entry:o,index:p,key:o.id,label:o.display,onRemove:this.props.onRemove,testid:q,truncate:this.props.truncateTokens}));},this);return (h.createElement('span',{className:this.props.className,onClick:this.props.onClick},n));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={className:k.string,collection:k.object.isRequired,collectionKey:k.string,onClick:k.func,onRemove:k.func,renderer:k.func.isRequired,tokenTestIDGenerator:k.func,truncateTokens:k.bool};f.exports=l;}),null);
__d('MTokenRenderer.react',['React','cx','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes;k=babelHelpers.inherits(n,h.Component);l=k&&k.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$MTokenRenderer1=function(t){t.stopPropagation();t.preventDefault();this.props.onRemove&&this.props.onRemove(this.props.entry);}.bind(this),p;}n.prototype.render=function(){'use strict';if(this.props.onRemove)var o="_5snx"+(this.props.truncate?' '+"_p9m":''),p=h.createElement('a',{href:'#',className:o,'data-sigil':'touchable'},h.createElement('span',{className:"_1xe9",onClick:this.$MTokenRenderer1},'\u00a0\u00d7\u00a0'));var q="_1xea"+(this.props.truncate?' '+"_p9n":''),r=h.createElement('span',{className:q},this.props.label),s="_5snw"+(this.props.truncate?' '+"_p9o":''),t=h.createElement('input',{type:'hidden',value:this.props.entry.id,name:this.props.collectionKey+'['+this.props.index+']'});return h.createElement('span',babelHelpers['extends']({},this.props,{className:j(this.props.className,s)}),r,p,t);};n.propTypes={collectionKey:m.string,entry:m.object,index:m.number,label:m.string.isRequired,onRemove:m.func,testid:m.string,truncate:m.bool};f.exports=n;}),null);
__d('MTaggerResultsRow.react',['React','cx','MXUILayout.react','MXUIDiv.react','MXUILayoutColumn.react','MXUILayoutFillColumn.react'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n,o;if(c.__markCompiled)c.__markCompiled();var p=h.PropTypes;n=babelHelpers.inherits(q,h.Component);o=n&&n.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=o.constructor).call.apply(r,[this].concat(u)),this.state={checked:false},this.$MTaggerResultsRow1=function(){return (h.createElement('div',{className:"_5rmb",style:{backgroundImage:'url('+this.props.data.photo+')'}}));}.bind(this),this.$MTaggerResultsRow2=function(){var w=this.props.data,x=w.subtext;if(!x)return null;return (h.createElement('span',{className:"_5rmc"},x));}.bind(this),this.$MTaggerResultsRow3=function(event){this.setState({checked:!this.state.checked});this.props.onClickItem&&this.props.onClickItem(event,this.props.data,this.props.checked);}.bind(this),s;}q.prototype.render=function(){var r=this.props.data,s=this.props.checked?"_5tbv":'';return h.createElement(k,{'aria-checked':this.state.checked,className:"_5rmd",onClick:this.$MTaggerResultsRow3,role:'checkbox'},h.createElement(j,null,h.createElement(l,{key:'profile_image'},this.$MTaggerResultsRow1()),h.createElement(m,{alignself:'center',className:"_5rme",key:'display_name'},h.createElement('div',null,h.createElement('div',{className:"_5rmf"},r.display||r.name),this.$MTaggerResultsRow2())),h.createElement(l,{key:'check_mark'},h.createElement('div',{className:"_5tbx"},h.createElement('div',{className:s})))));};q.propTypes={data:p.object,onClickItem:p.func};f.exports=q;}),null);
__d('MTaggerTypeaheadPresenter.react',['MTaggerResultsRow.react','React','cx'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=30;k=babelHelpers.inherits(o,i.Component);l=k&&k.prototype;o.prototype.render=function(){var q=this.props.data.slice(0,n).map(function(r){var s=false;if(this.props.excludedEntries)s=!!this.props.excludedEntries[r.id];return (i.createElement(h,{key:r.id,data:r,onClickItem:this.props.onClickItem,checked:s}));},this);return (i.createElement('div',{className:"_53na",onTouchStart:this.props.onTouchStart},q));};function o(){k.apply(this,arguments);}o.propTypes={query:m.string,data:m.array,onClickItem:m.func,onTouchStart:m.func,excludedEntries:m.object};var p={ViewRenderer:o};f.exports=p;}),null);
__d("TokenCollection",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){"use strict";this.entries=[];}h.prototype.addEntry=function(i){"use strict";if(!this.hasEntry(i))this.entries.push(i);return this;};h.prototype.removeEntry=function(i){"use strict";if(this.hasEntry(i)){var j=0;while(j<this.entries.length){if(this.entries[j].id===i.id)break;j++;}this.entries.splice(j,1);}return this;};h.prototype.hasEntry=function(i){"use strict";var j=i.id;return this.entries.some(function(k){return k.id===j;});};h.prototype.shallowClone=function(){"use strict";var i=new h();i.entries=this.entries.slice(0);return i;};f.exports=h;}),null);
__d('MTokenizer.react',['React','ReactComponentRenderer','MReactTypeahead','MTaggerTypeaheadPresenter.react','MTokenCollection.react','MTokenRenderer.react','TokenCollection','MViewport','Vector','Keys','MLegacyDataStore','cx','fbt','joinClasses'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v,w;if(c.__markCompiled)c.__markCompiled();var x=h.PropTypes;v=babelHelpers.inherits(y,h.Component);w=v&&v.prototype;function y(){var z,aa;'use strict';for(var ba=arguments.length,ca=Array(ba),da=0;da<ba;da++)ca[da]=arguments[da];return aa=(z=w.constructor).call.apply(z,[this].concat(ca)),this.state={focus:false},this.init=function(){this.initWithoutFocus();this.refs.typeahead.focusInput();}.bind(this),this.initWithoutFocus=function(){this.refs.typeahead.configureDatasource();this.forceUpdate();this.refs.typeahead.reset();}.bind(this),this.cleanup=function(){this.refs.typeahead.cleanup();}.bind(this),this.updateTypeahead=function(){this.forceUpdate();}.bind(this),this.onRemoveFromCollection=function(ea){this.$MTokenizer1.removeEntry(ea);this.props.onRemove&&this.props.onRemove(ea);this.forceUpdate();}.bind(this),this.$MTokenizer3=function(ea){if(!this.state.focus){ea.preventDefault();this.refs.typeahead.focusInput();this.setState({focus:true});}}.bind(this),this.$MTokenizer7=function(){if(this.$MTokenizer2===null)this.$MTokenizer2=o.getScrollTop();}.bind(this),this.$MTokenizer8=function(){if(this.$MTokenizer2!==null)o.scrollTo(0,this.$MTokenizer2);this.$MTokenizer2=null;}.bind(this),this.$MTokenizer5=function(event){if(this.props.scrollToTypeahead){this.$MTokenizer7();var ea=this.refs.typeahead.getInputNode(),fa=p.getPos(ea).y;o.scrollTo(0,fa);}if(event.nativeEvent.keyCode===q.BACKSPACE)this.$MTokenizer9();}.bind(this),this.$MTokenizer4=function(){if(this.props.scrollToTypeahead)this.$MTokenizer8();this.props.onInputBlur&&this.props.onInputBlur();if(this.state.focus)this.setState({focus:false});}.bind(this),this.$MTokenizer6=function(event,ea,fa){if(fa){this.onRemoveFromCollection(ea);}else{this.$MTokenizer1.addEntry(ea);this.props.onAdd&&this.props.onAdd(ea);}if(this.props.hideSelected)setTimeout(function(){this.refs.typeahead.focusInput();}.bind(this),0);event.stopPropagation();this.forceUpdate();}.bind(this),this.getEntries=function(){return this.$MTokenizer1.entries;}.bind(this),this.setEntries=function(ea){this.$MTokenizer1.entries=ea;}.bind(this),this.$MTokenizer9=function(){var ea=this.getEntries();if(ea&&ea.length&&!this.refs.typeahead.getInputValue())this.$MTokenizer1.removeEntry(ea[ea.length-1]);this.forceUpdate();}.bind(this),this.updateSuggestionsIds=function(ea){this.init();this.updateTypeaheadWithSuggestions(ea);}.bind(this),this.updateTypeaheadWithSuggestions=function(ea){this.refs.typeahead.updateSuggestionsIds(ea);}.bind(this),this.focusAndUpdateSuggestionsIDs=function(ea){this.refs.typeahead.updateSuggestionsIds(ea);this.refs.typeahead.focusInput();}.bind(this),aa;}y.prototype.componentWillMount=function(){'use strict';this.$MTokenizer1=new n();this.$MTokenizer2=null;};y.prototype.componentWillUnmount=function(){'use strict';this.cleanup();};y.prototype.render=function(){'use strict';var z=this.$MTokenizer1.entries||[],aa={},ba=z&&z.length>0;if(ba)for(var ca=0;ca<z.length;++ca)aa[z[ca].id]=true;if(this.props.excludedEntries)for(var da in this.props.excludedEntries)aa[da]=this.props.excludedEntries[da];var ea=ba?null:this.props.placeholder;return h.createElement('div',babelHelpers['extends']({},this.props,{className:u(this.props.className,"_5snt"),onClick:this.$MTokenizer3}),h.createElement(l,{ref:'collection',collection:this.$MTokenizer1,collectionKey:this.props.collectionKey,renderer:m,onRemove:this.onRemoveFromCollection}),h.createElement(j,{ref:'typeahead',className:"_5snu",typeaheadRootClassName:"_5snv",excludedEntries:aa,placeholder:ea,presenter:this.props.presenter,typeaheadConfig:this.props.typeaheadConfig,includeFamilyTags:this.props.includeFamilyTags,onBlur:this.$MTokenizer4,onKeyDown:this.$MTokenizer5,onClickItem:this.$MTokenizer6,suggestions:this.props.suggestions,hideSelected:this.props.hideSelected,maxSuggestionCount:this.props.maxSuggestionCount}));};y.propTypes={placeholder:x.string,typeaheadConfig:x.object.isRequired,presenter:x.object.isRequired,excludedEntries:x.object,collectionKey:x.string,onInputBlur:x.func,includeFamilyTags:x.bool,hideSelected:x.bool,onAdd:x.func,onRemove:x.func,maxSuggestionCount:x.number,scrollToTypeahead:x.bool};y.init=function(z){var aa=t._("Comece a digitar um nome..."),ba=r.get(z.container);ba.tokenizer=new i(y,z.container);ba.tokenizer.setProps({placeholder:aa,presenter:k,typeaheadConfig:z.typeaheadConfig,suggestions:z.suggestions,hideSelected:z.hideselected,collectionKey:z.collectionKey});ba.tokenizer.component.init();};f.exports=y;}),null);
__d('MCompositionConstants',['keyMirror'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={ActionTypes:h({CLOSE_DIALOG:null,COMPOSITION_FINALIZE:null,COMPOSITION_INITIALIZE:null,DISABLE_PHOTOS:null,FORMAT_CHANGE:null,MINUTIAE_REMOVE:null,MINUTIAE_SET:null,PHOTO_CHANGE:null,PLACE_REMOVE:null,PLACE_SET:null,PRIVACY_CHANGE:null,GROUP_SELL_UPDATE:null,SHARE_LINK_UPDATE:null,STATUS_CHANGE:null,SHARE_REMOVE_PREVIEW:null,WITH_CHANGE:null}),PayloadSources:h({USER_ACTION:null})};}),null);
__d('MCompositionDispatcher',['Dispatcher_DEPRECATED','createObjectFrom','getObjectValues','invariant','MCompositionConstants'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=c('MCompositionConstants').ActionTypes,m=c('MCompositionConstants').PayloadSources,n=i(j(l));function o(q){return function(r){!!!r.data?k(0):void 0;!!!r.actionType?k(0):void 0;!n.hasOwnProperty(r.actionType)?k(0):void 0;this.dispatch({action:r,paylodSource:q});};}var p=Object.assign(new h(),{handleUpdateFromUserAction:o(m.USER_ACTION)});f.exports=p;}),null);
__d("keyOf",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=function i(j){var k;for(k in j){if(!j.hasOwnProperty(k))continue;return k;}return null;};f.exports=h;}),null);
__d('ImmutableValue',['invariant','isNode','keyOf'],(function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=j({_DONT_EVER_TYPE_THIS_SECRET_KEY:null});function l(m){!(m===l[k])?h(0):void 0;}l.mergeAllPropertiesInto=function(m,n){var o=n.length;for(var p=0;p<o;p++)Object.assign(m,n[p]);};l.deepFreezeRootNode=function(m){if(i(m))return;Object.freeze(m);for(var n in m)if(m.hasOwnProperty(n))l.recurseDeepFreeze(m[n]);Object.seal(m);};l.recurseDeepFreeze=function(m){if(i(m)||!l.shouldRecurseFreeze(m))return;Object.freeze(m);for(var n in m)if(m.hasOwnProperty(n))l.recurseDeepFreeze(m[n]);Object.seal(m);};l.shouldRecurseFreeze=function(m){return (typeof m==='object'&&!(m instanceof l)&&m!==null);};l._DONT_EVER_TYPE_THIS_SECRET_KEY=Math.random();f.exports=l;}),null);
__d('ImmutableObject',['ImmutableValue','invariant','keyOf','mergeHelpers'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;if(c.__markCompiled)c.__markCompiled();var n=k.checkMergeObjectArgs,o=k.isTerminal,p=j({_DONT_EVER_TYPE_THIS_SECRET_KEY:null});function q(t){!(t instanceof h)?i(0):void 0;}l=babelHelpers.inherits(r,h);m=l&&l.prototype;function r(){m.constructor.call(this,h[p]);h.mergeAllPropertiesInto(this,arguments);}r.create=function(){var t=Object.create(r.prototype);r.apply(t,arguments);return t;};r.set=function(t,u){q(t);!(typeof u==='object'&&u!==undefined&&!Array.isArray(u))?i(0):void 0;return new r(t,u);};r.setProperty=function(t,u,v){var w={};w[u]=v;return r.set(t,w);};r.deleteProperty=function(t,u){var v={};for(var w in t)if(w!==u&&t.hasOwnProperty(w))v[w]=t[w];return new r(v);};r.setDeep=function(t,u){q(t);return s(t,u);};r.values=function(t){return Object.keys(t).map(function(u){return t[u];});};function s(t,u){n(t,u);var v={},w=Object.keys(t);for(var x=0;x<w.length;x++){var y=w[x];if(!u.hasOwnProperty(y)){v[y]=t[y];}else if(o(t[y])||o(u[y])){v[y]=u[y];}else v[y]=s(t[y],u[y]);}var z=Object.keys(u);for(x=0;x<z.length;x++){var aa=z[x];if(t.hasOwnProperty(aa))continue;v[aa]=u[aa];}return (t instanceof h?new r(v):u instanceof h?new r(v):v);}f.exports=r;}),null);
__d('MCompositionStore',['ImmutableObject','MCompositionDispatcher','createObjectFrom','getObjectValues','invariant','mixInEventEmitter','MCompositionConstants'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=c('MCompositionConstants').ActionTypes,o={};function p(q,r){'use strict';!!o.hasOwnProperty(q)?l(0):void 0;this.$MCompositionStore1=null;this.$MCompositionStore2=null;this.$MCompositionStore3=r;this.$MCompositionStore4={};this.$MCompositionStore5=null;this.$MCompositionStore6=null;this.$MCompositionStore7=q;this.$MCompositionStore8=false;this.$MCompositionStore9=j(k(r));}p.prototype.setMutable=function(q){'use strict';this.$MCompositionStore10();this.$MCompositionStore8=q;return this;};p.prototype.addChangeListener=function(q){'use strict';return this.addListener('change',q);};p.prototype.$MCompositionStore11=function(q){'use strict';!this.hasField(q)?l(0):void 0;};p.prototype.$MCompositionStore12=function(){'use strict';!(this.$MCompositionStore2&&o.hasOwnProperty(this.$MCompositionStore7))?l(0):void 0;};p.prototype.$MCompositionStore13=function(q){'use strict';if(!q||!this.$MCompositionStore6)return;Object.keys(this.$MCompositionStore6).forEach(function(r){!q.hasOwnProperty(r)?l(0):void 0;});};p.prototype.$MCompositionStore10=function(){'use strict';!(!this.$MCompositionStore2&&!o.hasOwnProperty(this.$MCompositionStore7))?l(0):void 0;};p.prototype.get=function(q,r){'use strict';this.$MCompositionStore12();this.$MCompositionStore11(q);if(this.$MCompositionStore1&&this.$MCompositionStore1.hasOwnProperty(q)){return this.$MCompositionStore1[q];}else if(r!==undefined){return r;}else return null;};p.prototype.getAll=function(){'use strict';this.$MCompositionStore12();return this.$MCompositionStore1||new h();};p.prototype.getID=function(){'use strict';return this.$MCompositionStore7;};p.getRegisteredStores=function(){'use strict';return k(o);};p.prototype.$MCompositionStore14=function(q){var r=q.action,s=r.actionType,t=r.data;'use strict';if(!this.$MCompositionStore15(s))return;this.$MCompositionStore16(this.$MCompositionStore4[s].call(null,t[this.$MCompositionStore7]||null));this.emit('change');};p.prototype.hasField=function(q){'use strict';return this.$MCompositionStore9.hasOwnProperty(q);};p.prototype.$MCompositionStore15=function(q){'use strict';return this.$MCompositionStore4.hasOwnProperty(q);};p.prototype.isEmpty=function(){'use strict';this.$MCompositionStore12();return !this.$MCompositionStore1;};p.prototype.register=function(){'use strict';!!this.$MCompositionStore2?l(0):void 0;this.$MCompositionStore2=i.register(this.$MCompositionStore14.bind(this));o[this.$MCompositionStore7]=this;return this;};p.prototype.$MCompositionStore16=function(q){'use strict';if(q){this.$MCompositionStore13(q);Object.keys(q).forEach(function(r){return this.$MCompositionStore11(r);}.bind(this));if(this.$MCompositionStore8){this.$MCompositionStore1=q;}else this.$MCompositionStore1=new h(q);}else this.$MCompositionStore1=null;return this;};p.prototype.setHandlerFor=function(q,r){'use strict';this.$MCompositionStore10();!n.hasOwnProperty(q)?l(0):void 0;!!this.$MCompositionStore15(q)?l(0):void 0;this.$MCompositionStore4[q]=r;return this;};p.prototype.setRequiredFields=function(){'use strict';this.$MCompositionStore10();for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];r.forEach(function(t){return this.$MCompositionStore11(t);}.bind(this));this.$MCompositionStore6=j(r);return this;};p.prototype.toUpdate=function(){'use strict';this.$MCompositionStore12();return this.$MCompositionStore2;};m(p,{change:true});f.exports=p;}),null);
__d('MCompositionConfigStore',['MCompositionStore','MCompositionConfigFields','MCompositionStoreID','emptyFunction','invariant','MCompositionConstants'],(function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=c('MCompositionConstants').ActionTypes;function n(){return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(p){var q=Math.random()*16|0,r=p=='x'?q:q&3|8;return r.toString(16);});}var o=new h(j.CONFIG,i).setRequiredFields(i.ACTION,i.BUTTON_TEXT_SUBMIT,i.COMPOSER_TITLE,i.OPENED_AT,i.SESSION_ID).setHandlerFor(m.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(m.COMPOSITION_INITIALIZE,function(p){p=p||{};p[i.SESSION_ID]=n();p[i.OPENED_AT]=Date.now();return p;}).setHandlerFor(m.DISABLE_PHOTOS,function(p){var q=p&&p[i.DISABLE_PHOTOS];!(q!==undefined&&q!==null)?l(0):void 0;var r={};r[i.DISABLE_PHOTOS]=q;return babelHelpers['extends']({},o.getAll(),r);}).register();f.exports=o;}),null);
__d('MCompositionStatusStore',['MCompositionStore','MCompositionStatusFields','MCompositionStoreID','emptyFunction','MCompositionConstants'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=c('MCompositionConstants').ActionTypes;function m(o){o=o||{};if(!o.hasOwnProperty(i.TEXT))o[i.TEXT]='';o[i.LONGEST_LENGTH]=Math.max(n.get(i.LONGEST_LENGTH,0),o[i.TEXT].length);return o;}var n=new h(j.STATUS,i).setRequiredFields(i.LONGEST_LENGTH,i.TEXT).setHandlerFor(l.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(l.COMPOSITION_INITIALIZE,m).setHandlerFor(l.STATUS_CHANGE,m).register();f.exports=n;}),null);
__d('MComposerLoggerSpecialCases',['MarauderLogger','MComposerWaterfallEvent'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={};function k(event,l){j[event]=l;}k(i.COMPOSER_CANCEL,function(l){h.toggleModule('composer',false);return l;});k(i.COMPOSER_ENTRY,function(l){h.toggleModule('composer',true);return l;});k(i.COMPOSER_POST,function(l){switch(h.getNavigationModule()){case 'newsfeed':l.nectar_module='newsfeed_composer';break;case 'timeline':l.nectar_module='timeline_composer';break;default:l.nectar_module='unspecified_source';}h.toggleModule('composer',false);return l;});f.exports=j;}),null);
__d('MComposerLogger',['Promise','ErrorUtils','MComposerConfig','MComposerWaterfallEvent','MCompositionConfigFields','MCompositionConfigStore','createObjectFrom','getObjectValues','invariant','memoize'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=n(o(k)),s=q(function(){return new h(function(v){if(j.ENABLE_LOGGING){e(['MarauderLogger','MComposerLoggerSpecialCases'],function(){for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v(x);});}else v();});});function t(event,v,w,x,y){var z=y[0],aa=y[1];if(aa.hasOwnProperty(event))v=aa[event].call(null,v);z.log(event,'composer',v,null,null,w,x);}var u={log:i.guard(function(event,v){!r.hasOwnProperty(event)?p(0):void 0;if(m.isEmpty())return;var w=m.get(l.SESSION_ID,null);!(w!==null)?p(0):void 0;return u.logWithSessionID(event,w,v);},'MComposerLogger',u),logWithSessionID:i.guard(function(event,v,w){if(j.ENABLE_LOGGING){return s().then(t.bind(null,event,w||{},v,Date.now()));}else return s();})};f.exports=u;}),null);
__d('MComposerNavigationPolicy',['invariant'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k){k.forEach(function(l){return l.call();});}function j(k){'use strict';this.$MComposerNavigationPolicy1=false;this.$MComposerNavigationPolicy2=false;this.$MComposerNavigationPolicy3=false;this.$MComposerNavigationPolicy4=[];this.$MComposerNavigationPolicy5=[];this.$MComposerNavigationPolicy6=[];this.$MComposerNavigationPolicy7=[];this.$MComposerNavigationPolicy8=[];this.$MComposerNavigationPolicy9=k||null;}j.prototype.addOnClose=function(k){'use strict';this.$MComposerNavigationPolicy5.push(k);return this;};j.prototype.addOnCloseByBrowser=function(k){'use strict';this.$MComposerNavigationPolicy4.push(k);return this;};j.prototype.addOnOpen=function(k){'use strict';this.$MComposerNavigationPolicy7.push(k);return this;};j.prototype.addOnOpenChild=function(k){'use strict';this.$MComposerNavigationPolicy8.push(k);return this;};j.prototype.addOnReturnFromChild=function(k){'use strict';this.$MComposerNavigationPolicy6.push(k);return this;};j.prototype.close=function(){'use strict';!this.$MComposerNavigationPolicy2?h(0):void 0;!!this.$MComposerNavigationPolicy1?h(0):void 0;this.$MComposerNavigationPolicy1=true;i(this.$MComposerNavigationPolicy5);if(this.$MComposerNavigationPolicy9)this.$MComposerNavigationPolicy9.returnFromChild();return this;};j.prototype.closeByBrowser=function(){'use strict';i(this.$MComposerNavigationPolicy4);this.close();return this;};j.prototype.destroy=function(){'use strict';if(this.$MComposerNavigationPolicy9){this.$MComposerNavigationPolicy9.destroy();this.$MComposerNavigationPolicy9=null;}};j.prototype.setIsOnSubmit=function(){'use strict';this.$MComposerNavigationPolicy3=true;};j.prototype.isOnSubmit=function(){'use strict';return this.$MComposerNavigationPolicy3;};j.prototype.getParent=function(){'use strict';return this.$MComposerNavigationPolicy9;};j.prototype.hasClosed=function(){'use strict';return this.$MComposerNavigationPolicy1;};j.prototype.hasOpened=function(){'use strict';return this.$MComposerNavigationPolicy2;};j.prototype.open=function(){'use strict';!!this.$MComposerNavigationPolicy2?h(0):void 0;this.$MComposerNavigationPolicy2=true;if(this.$MComposerNavigationPolicy9)this.$MComposerNavigationPolicy9.openChild();i(this.$MComposerNavigationPolicy7);return this;};j.prototype.openChild=function(){'use strict';i(this.$MComposerNavigationPolicy8);return this;};j.prototype.returnFromChild=function(){'use strict';i(this.$MComposerNavigationPolicy6);return this;};f.exports=j;}),null);
__d('MComposerNavigation',['MComposerNavigationConstants','MComposerNavigationPolicy','MHistory','MURI','Stratcom','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n='mds',o='composer',p='review-saved';function q(){!(!r||r.hasOpened())?m(0):void 0;}var r=null,s={currentPolicy:function u(){q();return r;},newPolicy:function u(){q();if(!r&&h.USE_PUSH_STATE)j.pushSoftState(o);var v=new i(r);r=v;v.addOnClose(function(){r=v.getParent();if(!r&&!v.isOnSubmit()&&h.USE_PUSH_STATE)j.popSoftState(o);});return v;},cleanupSoftState:function u(){if(h.USE_PUSH_STATE)j.popSoftState(o);}},t=false;if(h.USE_PUSH_STATE)l.listen('m:history:change',null,function(event){var u=event.getData().soft;if(!r||u===o||u===p)return;var v=new k(event.getData().path).getQueryData().hasOwnProperty(n);if(!t&&v){t=true;r.openChild();return;}if(t&&!v){t=false;j.pushSoftState(o);r.returnFromChild();return;}if(t&&v)return;if(r.getParent())j.pushSoftState(o);r.closeByBrowser();});l.listen('m:page:unload',null,function(){if(r&&r.destroy)r.destroy();r=null;});f.exports=s;}),null);
__d('MStructuredComposerTaggingInputReact',['React'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k="xy_tags",l='failed_suggestions';i=babelHelpers.inherits(m,h.Component);j=i&&i.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MStructuredComposerTaggingInputReact1=function(s,t,u,v){var w=k+"["+v+"]";return (h.createElement('div',{key:"tag"+s.fbid},h.createElement('input',{type:'hidden',name:w+"[x]",value:s.x}),h.createElement('input',{type:'hidden',name:w+"[y]",value:s.y}),h.createElement('input',{type:'hidden',name:w+"[fbid]",value:s.photoID}),h.createElement('input',{type:'hidden',name:w+"[name]",value:u}),h.createElement('input',{type:'hidden',name:w+"[subject]",value:t}),h.createElement('input',{type:'hidden',name:w+"[facebox]",value:s.fbid}),h.createElement('input',{type:'hidden',name:w+"[source]",value:'photos_touch_composer'})));},this.$MStructuredComposerTaggingInputReact2=function(){var s=this.props.tokenCollection,t=this.props.tagSuggestions,u=[],v=0;s.map(function(w){var x=t[w.id];if(x)u=u.concat(Object.keys(x).map(function(y){var z=this.$MStructuredComposerTaggingInputReact1(x[y],w.id,w.name,v);v++;return z;}.bind(this)));}.bind(this));return u;}.bind(this),this.$MStructuredComposerTaggingInputReact3=function(s,t){var u=l+"["+t+"]";return (h.createElement('div',{key:"failed"+s.fbid},h.createElement('input',{type:'hidden',name:u+"[fbid]",value:s.fbid}),h.createElement('input',{type:'hidden',name:u+"[tagee]",value:s.recognitions[0].user.fbid})));},o;}m.prototype.render=function(){'use strict';return (h.createElement('div',null,this.$MStructuredComposerTaggingInputReact2(),this.props.failedSuggestions.map(this.$MStructuredComposerTaggingInputReact3)));};f.exports=m;}),null);
__d("XPhotosGetRecognitionController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/photos\/tagging\/recognition\/",{photos:{type:"IntVector"},recognition_project:{type:"String",defaultValue:"default"},include_unrecognized_faceboxes:{type:"Bool",defaultValue:false},is_page:{type:"Bool",defaultValue:false},target:{type:"Int"},include_face_crop_src:{type:"Bool",defaultValue:false},include_recognized_user_profile_picture:{type:"Bool",defaultValue:false},include_low_confidence_recognitions:{type:"Bool",defaultValue:false},face_crop_width:{type:"Int",defaultValue:32},face_crop_height:{type:"Int",defaultValue:32}});}),null);
__d('MTagSuggestionsPoller',['MRequest','XPhotosGetRecognitionController','PhotosUploadWaterfallXMixin','mixin','performanceNow','PUWSteps'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o;if(c.__markCompiled)c.__markCompiled();var p=4,q=2000,r=8000;n=babelHelpers.inherits(s,k(j));o=n&&n.prototype;function s(){'use strict';o.constructor.call(this);this.$MTagSuggestionsPoller1=q;this.$MTagSuggestionsPoller2=0;this.$MTagSuggestionsPoller3={};this.$MTagSuggestionsPoller4=false;this.$MTagSuggestionsPoller5=null;}s.prototype.setRecognitionProject=function(t){'use strict';this.$MTagSuggestionsPoller6=t;return this;};s.prototype.setIncludeUnrecognized=function(t){'use strict';this.$MTagSuggestionsPoller7=t;return this;};s.prototype.setTargetIsPage=function(t){'use strict';this.$MTagSuggestionsPoller8=t;return this;};s.prototype.setTargetId=function(t){'use strict';this.$MTagSuggestionsPoller9=t;return this;};s.prototype.setHandler=function(t){'use strict';this.$MTagSuggestionsPoller10=t;return this;};s.prototype.setTimeoutHandler=function(t){'use strict';this.$MTagSuggestionsPoller11=t;return this;};s.prototype.isPolling=function(){'use strict';return this.$MTagSuggestionsPoller4;};s.prototype.setWaterfall=function(t,u,v){'use strict';this.$MTagSuggestionsPoller12=t;this.$MTagSuggestionsPoller13=u;this.$MTagSuggestionsPoller14=v;return this;};s.prototype.addPhotoIDAndLog=function(t,u){'use strict';this.$MTagSuggestionsPoller3[t]=u;this.logStep(m.CLIENT_FACEREC_BEGIN,{fbid:t});this.invalidateTimeout();this.startMasterTimerIfNeeded();};s.prototype.removePhotoID=function(t){'use strict';delete this.$MTagSuggestionsPoller3[t];};s.prototype.hasPhotoID=function(t){'use strict';return this.$MTagSuggestionsPoller3.hasOwnProperty(t);};s.prototype.$MTagSuggestionsPoller15=function(t){'use strict';return this.$MTagSuggestionsPoller3[t];};s.prototype.startMasterTimerIfNeeded=function(){'use strict';if(!this.$MTagSuggestionsPoller5){this.$MTagSuggestionsPoller16=l();this.$MTagSuggestionsPoller5=setTimeout(this.$MTagSuggestionsPoller17.bind(this),r);}};s.prototype.invalidateTimeout=function(){'use strict';this.$MTagSuggestionsPoller2=0;if(this.$MTagSuggestionsPoller5){clearTimeout(this.$MTagSuggestionsPoller5);this.$MTagSuggestionsPoller5=null;}};s.prototype.start=function(){'use strict';var t=this.$MTagSuggestionsPoller18();if(t.length>0){this.$MTagSuggestionsPoller4=true;this.$MTagSuggestionsPoller2++;this.startMasterTimerIfNeeded();var u=new h(this.$MTagSuggestionsPoller19(t));this.$MTagSuggestionsPoller20=u;u.listen('done',function(v){this.$MTagSuggestionsPoller21(v);}.bind(this));u.listen('error',function(v){this.$MTagSuggestionsPoller22(v);}.bind(this));u.setTimeout(r);u.send();}};s.prototype.$MTagSuggestionsPoller17=function(){'use strict';this.$MTagSuggestionsPoller11&&this.$MTagSuggestionsPoller11(this.$MTagSuggestionsPoller23());this.abort();};s.prototype.abort=function(){'use strict';this.$MTagSuggestionsPoller4=false;for(var t in this.$MTagSuggestionsPoller3)this.logStep(m.CLIENT_FACEREC_FAIL,{attempt_number:this.$MTagSuggestionsPoller2,elapsed_time:l()-this.$MTagSuggestionsPoller16,fbid:t});this.$MTagSuggestionsPoller3={};this.invalidateTimeout();if(this.$MTagSuggestionsPoller20){this.$MTagSuggestionsPoller20&&this.$MTagSuggestionsPoller20.abort();this.$MTagSuggestionsPoller20=null;}};s.prototype.$MTagSuggestionsPoller21=function(t){'use strict';if(t.payload){var u=t.payload.filter(function(v){var w=v.fbid,x=this.hasPhotoID(w);if(x){v.attachmentID=this.$MTagSuggestionsPoller15(w);this.removePhotoID(w);this.logStep(m.CLIENT_FACEREC_SUCCESS,{attempt_number:this.$MTagSuggestionsPoller2,elapsed_time:l()-this.$MTagSuggestionsPoller16,xy_tag_count:v.faceboxes.length,fbid:w});}return x;}.bind(this));if(u.length>0)this.$MTagSuggestionsPoller10(u);}this.restart();};s.prototype.$MTagSuggestionsPoller22=function(t){'use strict';this.restart();};s.prototype.restart=function(){'use strict';if(this.$MTagSuggestionsPoller2<p){setTimeout(this.start.bind(this),this.$MTagSuggestionsPoller1);}else this.$MTagSuggestionsPoller17();};s.prototype.$MTagSuggestionsPoller18=function(){'use strict';var t=[];for(var u in this.$MTagSuggestionsPoller3)t.push(u);return t;};s.prototype.$MTagSuggestionsPoller23=function(){'use strict';var t=[];for(var u in this.$MTagSuggestionsPoller3)t.push(this.$MTagSuggestionsPoller3[u]);return t;};s.prototype.$MTagSuggestionsPoller19=function(t){'use strict';var u=i.getURIBuilder().setIntVector('photos',t).setString('recognition_project',this.$MTagSuggestionsPoller6).setBool('include_unrecognized_faceboxes',this.$MTagSuggestionsPoller7).setBool('is_page',this.$MTagSuggestionsPoller8).setInt('target',this.$MTagSuggestionsPoller9).getURI();return u;};s.prototype.getWaterfallID=function(){'use strict';return this.$MTagSuggestionsPoller12;};s.prototype.getWaterfallAppName=function(){'use strict';return this.$MTagSuggestionsPoller13;};s.prototype.getWaterfallSource=function(){'use strict';return this.$MTagSuggestionsPoller14;};f.exports=s;}),null);
__d('MTagSuggestionsController',['MTagSuggestionsPoller','React','ReactDOM','MStructuredComposerTaggingInputReact','DOM','BanzaiODS'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n='mtouch_composer_facerec_suggestions';function o(p,q,r,s,t,u){'use strict';this.$MTagSuggestionsController1=p;this.$MTagSuggestionsController1.setOnShow(this.onTokenizerInit.bind(this));this.$MTagSuggestionsController1.setOnClear(this.reset.bind(this));this.$MTagSuggestionsController2=q.getUploader();this.$MTagSuggestionsController3=t;this.$MTagSuggestionsController3.setOnEntriesChangedHandler(this.$MTagSuggestionsController4.bind(this));this.$MTagSuggestionsController5=0;this.$MTagSuggestionsController2.setProps({onUploadSuccess:this.onPhotoUploadSuccess.bind(this),onRemove:this.removeFaceboxesByPhotoID.bind(this)});this.$MTagSuggestionsController6=new h().setRecognitionProject('composer_facerec').setIncludeUnrecognized(true).setTargetIsPage(r==='page').setTargetId(s).setHandler(function(v){this.handleFaceboxResponse(v);}.bind(this)).setTimeoutHandler(function(v){this.onPollerTimeout(v);}.bind(this)).setWaterfall(this.$MTagSuggestionsController2.component.getWaterfallID(),this.$MTagSuggestionsController2.component.getWaterfallAppName(),this.$MTagSuggestionsController2.component.getWaterfallSource());this.$MTagSuggestionsController7={};this.$MTagSuggestionsController8={};this.$MTagSuggestionsController9={};this.$MTagSuggestionsController10=false;this.$MTagSuggestionsController11={};this.$MTagSuggestionsController12=!!u;}o.prototype.onTokenizerInit=function(){'use strict';if(Object.keys(this.$MTagSuggestionsController9).length>0)this.updateTypeaheadWithFaceboxSuggestions();if(!this.$MTagSuggestionsController10){this.$MTagSuggestionsController10=true;this.$MTagSuggestionsController1.getTokenizer().setProps({onAdd:this.$MTagSuggestionsController13.bind(this),onRemove:this.$MTagSuggestionsController14.bind(this)});}};o.prototype.$MTagSuggestionsController13=function(p){'use strict';this.$MTagSuggestionsController11[p.id]=true;};o.prototype.$MTagSuggestionsController14=function(p){'use strict';delete this.$MTagSuggestionsController11[p.id];if(p.autoTag)m.bumpEntityKey(n,'remove_auto_tag');};o.prototype.$MTagSuggestionsController15=function(p){'use strict';var q={};p.forEach(function(w){q[w.id]=true;});for(var r in this.$MTagSuggestionsController7)for(var s in this.$MTagSuggestionsController7[r]){var t=this.$MTagSuggestionsController7[r][s];if(!t.tagUserID){if(!t.ignoreRecognition){var u=t.recognitions[0].user.fbid,v=t.recognitions[0].user.name;if(q[u]){t.tagUserID=u;t.tagName=v;}}}else if(!q[t.tagUserID]){if(this.$MTagSuggestionsController8[t.tagUserID]&&t.ignoreRecognition)delete this.$MTagSuggestionsController8[t.tagUserID][s];delete t.tagUserID;delete t.tagName;}}};o.prototype.$MTagSuggestionsController4=function(p){'use strict';this.$MTagSuggestionsController15(p);this.$MTagSuggestionsController16(p);};o.prototype.$MTagSuggestionsController16=function(p){'use strict';var q={};p.forEach(function(r){var s=this.$MTagSuggestionsController8[r.id];for(var t in s){var u=s[t].attachmentID;if(!q[u])q[u]=0;q[u]++;}}.bind(this));this.$MTagSuggestionsController2.component.setAttachmentTagCounts(q);};o.prototype.onPhotoUploadSuccess=function(p,q){'use strict';this.$MTagSuggestionsController6.addPhotoIDAndLog(p,q);this.$MTagSuggestionsController2.component.setAttachmentProps(q,{isPollingTagSuggestions:true});if(!this.$MTagSuggestionsController6.isPolling())this.$MTagSuggestionsController6.start();};o.prototype.$MTagSuggestionsController17=function(p){'use strict';return {name:p.tagName,display:p.tagName,id:p.tagUserID,autoTag:true};};o.prototype.handleFaceboxResponse=function(p){'use strict';p.forEach(function(r){var s=r.fbid,t=r.faceboxes;this.$MTagSuggestionsController2.component.setAttachmentProps(r.attachmentID,{isPollingTagSuggestions:false});t.forEach(function(u){u.photoID=s;u.attachmentID=r.attachmentID;if(!this.$MTagSuggestionsController7[s])this.$MTagSuggestionsController7[s]={};this.$MTagSuggestionsController7[s][u.fbid]=u;if(u.recognitions.length>0){u.ignoreRecognition=false;var v=u.recognitions[0].user.fbid;if(!this.$MTagSuggestionsController8[v])this.$MTagSuggestionsController8[v]={};this.$MTagSuggestionsController8[v][u.fbid]=u;if(!this.$MTagSuggestionsController9[v])this.$MTagSuggestionsController9[v]=0;this.$MTagSuggestionsController9[v]++;if(!this.$MTagSuggestionsController10&&this.$MTagSuggestionsController12){u.tagName=u.recognitions[0].user.name;u.tagUserID=v;var w=this.$MTagSuggestionsController17(u);this.$MTagSuggestionsController3.addAutoToken(w);}}else u.ignoreRecognition=true;}.bind(this));}.bind(this));var q=this.$MTagSuggestionsController3.getEntries();this.$MTagSuggestionsController15(q);this.$MTagSuggestionsController16(q);};o.prototype.removeFaceboxesByPhotoID=function(p){'use strict';if(this.$MTagSuggestionsController6.hasPhotoID(p)){this.$MTagSuggestionsController6.removePhotoID(p);}else if(this.$MTagSuggestionsController7[p]){var q=this.$MTagSuggestionsController7[p];for(var r in q){var s=q[r];if(s.recognitions.length>0)this.$MTagSuggestionsController18(s);}this.$MTagSuggestionsController7[p]=null;}};o.prototype.$MTagSuggestionsController18=function(p){'use strict';var q=p.tagUserID||p.recognitions[0].user.fbid;if(p.recognitions.length>0){this.$MTagSuggestionsController9[q]--;if(this.$MTagSuggestionsController9[q]===0)delete this.$MTagSuggestionsController9[q];}if(this.$MTagSuggestionsController8[q]){delete this.$MTagSuggestionsController8[q][p.fbid];if(Object.keys(this.$MTagSuggestionsController8[q]).length<=0&&!this.$MTagSuggestionsController11[q]&&this.$MTagSuggestionsController12){var r=this.$MTagSuggestionsController17(p);this.$MTagSuggestionsController3.onRemove(r);}else this.$MTagSuggestionsController16(this.$MTagSuggestionsController3.getEntries());}};o.prototype.updateTypeaheadWithFaceboxSuggestions=function(){'use strict';var p=Object.keys(this.$MTagSuggestionsController9);p=p.map(function(s){return +s;});var q=this.$MTagSuggestionsController1.getTokenizer(),r=q.component.props.suggestions.map(function(s){return s.uid;});r.forEach(function(s){if(p.indexOf(s)<0)p.push(s);});q.updateTypeaheadWithSuggestions(p);};o.prototype.$MTagSuggestionsController19=function(){'use strict';var p=this.$MTagSuggestionsController1.getTokenizer();p.component.updateTypeaheadWithSuggestions([]);};o.prototype.generateHiddenInput=function(p){'use strict';var q=[];for(var r in this.$MTagSuggestionsController7)for(var s in this.$MTagSuggestionsController7[r]){var t=this.$MTagSuggestionsController7[r][s];if(t.recognitions.length>0&&t.ignoreRecognition&&t.tagUserID!==t.recognitions[0].user.fbid)q.push(t);}var u=l.create('div',{});l.appendContent(p,u);j.render(i.createElement(k,{tokenCollection:this.$MTagSuggestionsController3.getEntries(),tagSuggestions:this.$MTagSuggestionsController8,failedSuggestions:q}),u);};o.prototype.onPollerTimeout=function(p){'use strict';p.forEach(function(q){this.$MTagSuggestionsController2.component.setAttachmentProps(q,{isPollingTagSuggestions:false});}.bind(this));};o.prototype.addXYTag=function(p){'use strict';var q=this.$MTagSuggestionsController7[p.photoID][p.fbid];if(q.recognitions.length>0)this.$MTagSuggestionsController18(q);o.addFaceboxData(q,p.tagName,p.tagUserID);if(!this.$MTagSuggestionsController8[q.tagUserID])this.$MTagSuggestionsController8[q.tagUserID]={};this.$MTagSuggestionsController8[q.tagUserID][q.fbid]=q;var r=this.$MTagSuggestionsController17(q);this.$MTagSuggestionsController3.addManualXYTag(r);this.$MTagSuggestionsController5+=1;};o.prototype.deleteXYTag=function(p){'use strict';var q=this.$MTagSuggestionsController7[p.photoID][p.fbid];q.ignoreRecognition=true;delete q.tagUserID;delete q.tagName;this.$MTagSuggestionsController18(p);this.$MTagSuggestionsController5-=1;};o.prototype.getNumXYTags=function(){'use strict';return this.$MTagSuggestionsController5;};o.prototype.getFaceboxesCopyForPhoto=function(p){'use strict';var q={};for(var r in this.$MTagSuggestionsController7[p])q[r]=babelHelpers['extends']({},this.$MTagSuggestionsController7[p][r]);return q;};o.prototype.reset=function(){'use strict';this.$MTagSuggestionsController6.abort();this.$MTagSuggestionsController9={};this.$MTagSuggestionsController7={};this.$MTagSuggestionsController8={};this.$MTagSuggestionsController19();this.$MTagSuggestionsController10=false;this.$MTagSuggestionsController11={};this.$MTagSuggestionsController5=0;};o.addFaceboxData=function(p,q,r){'use strict';p.tagName=q;p.tagUserID=r;p.ignoreRecognition=true;};o.deleteFaceboxData=function(p){'use strict';delete p.tagUserID;delete p.tagName;p.ignoreRecognition=true;};f.exports=o;}),null);
__d('PagesEventObserver',['Banzai'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='pages_client_logging',j={VITAL_WAIT:h.VITAL_WAIT,logData_DEPRECATED:function k(l,m){var n={delay:m||h.VITAL_WAIT};h.post(i,l,n);},notify:function k(event,l,m,n,o){var p=babelHelpers['extends']({},m,{event_name:event,page_id:l,dedupe:n!==false}),q={delay:o||h.VITAL_WAIT};h.post(i,p,q);}};f.exports=j;}),null);